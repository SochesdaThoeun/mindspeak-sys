"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3094],{44838:(e,a,t)=>{t.d(a,{SQ:()=>f,_2:()=>p,lp:()=>m,mB:()=>g,rI:()=>c,ty:()=>u});var n=t(95155),o=t(12115),i=t(48698),r=t(13052),s=t(5196),d=t(9428),l=t(59434);let c=i.bL,u=i.l9;i.YJ,i.ZL,i.Pb,i.z6,o.forwardRef((e,a)=>{let{className:t,inset:o,children:s,...d}=e;return(0,n.jsxs)(i.ZP,{ref:a,className:(0,l.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",o&&"pl-8",t),...d,children:[s,(0,n.jsx)(r.A,{className:"ml-auto"})]})}).displayName=i.ZP.displayName,o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,n.jsx)(i.G5,{ref:a,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...o})}).displayName=i.G5.displayName;let f=o.forwardRef((e,a)=>{let{className:t,sideOffset:o=4,...r}=e;return(0,n.jsx)(i.ZL,{children:(0,n.jsx)(i.UC,{ref:a,sideOffset:o,className:(0,l.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...r})})});f.displayName=i.UC.displayName;let p=o.forwardRef((e,a)=>{let{className:t,inset:o,...r}=e;return(0,n.jsx)(i.q7,{ref:a,className:(0,l.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",o&&"pl-8",t),...r})});p.displayName=i.q7.displayName,o.forwardRef((e,a)=>{let{className:t,children:o,checked:r,...d}=e;return(0,n.jsxs)(i.H_,{ref:a,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...d,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(i.VF,{children:(0,n.jsx)(s.A,{className:"h-4 w-4"})})}),o]})}).displayName=i.H_.displayName,o.forwardRef((e,a)=>{let{className:t,children:o,...r}=e;return(0,n.jsxs)(i.hN,{ref:a,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(i.VF,{children:(0,n.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),o]})}).displayName=i.hN.displayName;let m=o.forwardRef((e,a)=>{let{className:t,inset:o,...r}=e;return(0,n.jsx)(i.JU,{ref:a,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",o&&"pl-8",t),...r})});m.displayName=i.JU.displayName;let g=o.forwardRef((e,a)=>{let{className:t,...o}=e;return(0,n.jsx)(i.wv,{ref:a,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",t),...o})});g.displayName=i.wv.displayName},63464:(e,a,t)=>{t.d(a,{SP:()=>x,Ay:()=>C,bb:()=>u,jA:()=>p,G:()=>y,X0:()=>m,Q1:()=>f,OA:()=>g,_F:()=>v});var n=t(66439);let o={notifications:[],unreadCount:0,pagination:null,filters:{page:1,per_page:15},loading:{fetchNotifications:!1,markAsRead:!1,getUnreadCount:!1},error:null};var i=t(13984);let r=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let a=new URLSearchParams;e.page&&a.append("page",e.page.toString()),e.per_page&&a.append("per_page",e.per_page.toString()),void 0!==e.is_read&&a.append("is_read",e.is_read?"true":"false"),e.type&&a.append("type",e.type),e.sort&&a.append("sort",e.sort);let t=a.toString();return(await i.Ay.get("/notifications".concat(t?"?".concat(t):""))).data}catch(e){var a,t,n,o;throw console.error("Get notifications error:",e),{success:!1,message:(null==e||null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"Failed to fetch notifications",errors:null==e||null==(o=e.response)||null==(n=o.data)?void 0:n.errors}}},s=async e=>{try{return(await i.Ay.post("/notifications/read",e)).data}catch(e){var a,t,n,o;throw console.error("Mark notifications as read error:",e),{success:!1,message:(null==e||null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"Failed to mark notifications as read",errors:null==e||null==(o=e.response)||null==(n=o.data)?void 0:n.errors}}},d=async()=>{try{return{unread_count:(await r({page:1,per_page:1,is_read:!1})).meta.unread_count}}catch(o){var e,a,t,n;throw console.error("Get unread count error:",o),{success:!1,message:(null==o||null==(a=o.response)||null==(e=a.data)?void 0:e.message)||"Failed to get unread count",errors:null==o||null==(n=o.response)||null==(t=n.data)?void 0:t.errors}}},l=async()=>{try{return await s({mark_all:!0})}catch(e){throw console.error("Mark all notifications as read error:",e),e}},c=async e=>{try{return await s({notification_ids:e})}catch(e){throw console.error("Mark specific notifications as read error:",e),e}},u=(0,n.zD)("notifications/fetchNotifications",async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{rejectWithValue:a}=arguments.length>1?arguments[1]:void 0;try{return await r(e)}catch(e){return a((null==e?void 0:e.message)||"Failed to fetch notifications")}}),f=(0,n.zD)("notifications/markAsRead",async(e,a)=>{let{rejectWithValue:t}=a;try{return{...await s(e),payload:e}}catch(e){return t((null==e?void 0:e.message)||"Failed to mark notifications as read")}}),p=(0,n.zD)("notifications/fetchUnreadCount",async(e,a)=>{let{rejectWithValue:t}=a;try{return await d()}catch(e){return t((null==e?void 0:e.message)||"Failed to fetch unread count")}}),m=(0,n.zD)("notifications/markAllAsRead",async(e,a)=>{let{rejectWithValue:t}=a;try{return await l()}catch(e){return t((null==e?void 0:e.message)||"Failed to mark all notifications as read")}}),g=(0,n.zD)("notifications/markSpecificAsRead",async(e,a)=>{let{rejectWithValue:t}=a;try{return{...await c(e),notificationIds:e}}catch(e){return t((null==e?void 0:e.message)||"Failed to mark specific notifications as read")}}),y=(0,n.zD)("notifications/loadMore",async(e,a)=>{let{rejectWithValue:t,getState:n}=a;try{var o;let a=(null==(o=n().notifications.pagination)?void 0:o.current_page)||1;return await r({...e,page:a+1})}catch(e){return t((null==e?void 0:e.message)||"Failed to load more notifications")}}),h=(0,n.Z0)({name:"notifications",initialState:o,reducers:{setFilters:(e,a)=>{e.filters={...e.filters,...a.payload},(void 0!==a.payload.is_read||void 0!==a.payload.type)&&(e.filters.page=1)},clearNotifications:e=>{e.notifications=[],e.pagination=null,e.error=null},clearError:e=>{e.error=null},resetState:()=>o,updateLocalReadStatus:(e,a)=>{let{notification_ids:t,is_read:n}=a.payload;if(e.notifications)if(e.notifications=e.notifications.map(e=>t.includes(e.id)?{...e,is_read:n}:e),n){let a=t.filter(a=>e.notifications.find(e=>e.id===a&&!e.is_read)).length;e.unreadCount=Math.max(0,e.unreadCount-a)}else{let a=t.filter(a=>e.notifications.find(e=>e.id===a&&e.is_read)).length;e.unreadCount+=a}}},extraReducers:e=>{e.addCase(u.pending,e=>{e.loading.fetchNotifications=!0,e.error=null}).addCase(u.fulfilled,(e,a)=>{e.loading.fetchNotifications=!1,e.notifications=a.payload.data,e.pagination=a.payload.meta.pagination,e.unreadCount=a.payload.meta.unread_count}).addCase(u.rejected,(e,a)=>{e.loading.fetchNotifications=!1,e.error=a.payload}),e.addCase(y.pending,e=>{e.loading.fetchNotifications=!0,e.error=null}).addCase(y.fulfilled,(e,a)=>{e.loading.fetchNotifications=!1,e.notifications=[...e.notifications||[],...a.payload.data],e.pagination=a.payload.meta.pagination,e.unreadCount=a.payload.meta.unread_count}).addCase(y.rejected,(e,a)=>{e.loading.fetchNotifications=!1,e.error=a.payload}),e.addCase(f.pending,e=>{e.loading.markAsRead=!0,e.error=null}).addCase(f.fulfilled,(e,a)=>{if(e.loading.markAsRead=!1,e.unreadCount=a.payload.data.unread_count,e.notifications){let{payload:t}=a.payload;t.mark_all?e.notifications=e.notifications.map(e=>({...e,is_read:!0})):t.notification_ids&&(e.notifications=e.notifications.map(e=>t.notification_ids.includes(e.id)?{...e,is_read:!0}:e))}}).addCase(f.rejected,(e,a)=>{e.loading.markAsRead=!1,e.error=a.payload}),e.addCase(p.pending,e=>{e.loading.getUnreadCount=!0}).addCase(p.fulfilled,(e,a)=>{e.loading.getUnreadCount=!1,e.unreadCount=a.payload.unread_count}).addCase(p.rejected,(e,a)=>{e.loading.getUnreadCount=!1,e.error=a.payload}),e.addCase(m.pending,e=>{e.loading.markAsRead=!0,e.error=null}).addCase(m.fulfilled,(e,a)=>{e.loading.markAsRead=!1,e.unreadCount=a.payload.data.unread_count,e.notifications&&(e.notifications=e.notifications.map(e=>({...e,is_read:!0})))}).addCase(m.rejected,(e,a)=>{e.loading.markAsRead=!1,e.error=a.payload}),e.addCase(g.pending,e=>{e.loading.markAsRead=!0,e.error=null}).addCase(g.fulfilled,(e,a)=>{e.loading.markAsRead=!1,e.unreadCount=a.payload.data.unread_count,e.notifications&&(e.notifications=e.notifications.map(e=>a.payload.notificationIds.includes(e.id)?{...e,is_read:!0}:e))}).addCase(g.rejected,(e,a)=>{e.loading.markAsRead=!1,e.error=a.payload})}}),{setFilters:v,clearNotifications:x,clearError:N,resetState:_,updateLocalReadStatus:w}=h.actions,C=h.reducer},98722:(e,a,t)=>{t.d(a,{O:()=>r});var n=t(95155),o=t(12115),i=t(59434);function r(e){let{children:a,className:t,speed:r=50,delay:s=0}=e,[d,l]=(0,o.useState)(""),[c,u]=(0,o.useState)(0),[f,p]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=setTimeout(()=>{p(!0)},s);return()=>clearTimeout(e)},[s]),(0,o.useEffect)(()=>{if(f&&c<a.length){let e=setTimeout(()=>{l(a.substring(0,c+1)),u(c+1)},r);return()=>clearTimeout(e)}},[a,c,r,f]),(0,n.jsxs)("span",{className:(0,i.cn)("",t),children:[d,c<a.length&&(0,n.jsx)("span",{className:"animate-pulse",children:"|"})]})}}}]);