"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8185],{12840:(e,a,t)=>{t.d(a,{pD:()=>d,Ay:()=>k,ys:()=>g,kp:()=>P,tY:()=>i,dc:()=>r,Qx:()=>y,kL:()=>u,Rn:()=>p});var o=t(66439),s=t(13984);let l={getPublicPosts:async e=>{var a;console.log("\uD83D\uDCDD Post Service: Fetching public posts",e);let t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.per_page)&&t.append("per_page",e.per_page.toString()),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.tags)&&t.append("tags",e.tags),(null==e?void 0:e.sort)&&t.append("sort",e.sort);let o="/posts".concat(t.toString()?"?".concat(t.toString()):""),l=await s.FH.get(o);return console.log("✅ Post Service: Public posts fetched",{count:(null==(a=l.data.data.data)?void 0:a.length)||0,total:l.data.data.total}),l.data},getPostById:async e=>{console.log("\uD83D\uDCDD Post Service: Fetching post by ID",{id:e});let a=await s.FH.get("/posts/".concat(e));return console.log("✅ Post Service: Post fetched",{id:a.data.data.id,title:a.data.data.title,hasImage:!!a.data.data.image}),a.data},createPostWithImage:async e=>{var a,t,o,l,n,r;console.log("\uD83D\uDCDD Post Service: Creating post with image",{title:e.title,hasImage:!!e.image,emotion:e.emotion,link:e.link});let i=new FormData;i.append("title",e.title),i.append("content",e.content),i.append("is_anonymous",e.is_anonymous?"1":"0"),e.emotion&&i.append("emotion",e.emotion),e.link&&i.append("link",e.link),e.tags&&e.tags.length>0&&e.tags.forEach((e,a)=>{i.append("tags[".concat(a,"]"),e)}),e.image&&(i.append("image",e.image),e.image_alt&&i.append("image_alt",e.image_alt));let d=await s.FH.post("/posts",i,{headers:{"Content-Type":"multipart/form-data"}});return console.log("✅ Post Service: Post with image created",{id:(null==(a=d.data.data)?void 0:a.id)||"unknown",title:(null==(t=d.data.data)?void 0:t.title)||e.title,status:(null==(o=d.data.data)?void 0:o.status)||"pending",hasImage:!!(null==(l=d.data.data)?void 0:l.image),emotion:(null==(n=d.data.data)?void 0:n.emotion)||e.emotion,link:(null==(r=d.data.data)?void 0:r.link)||e.link}),d.data},createPost:async e=>{var a,t,o,n,r;if(e.image)return await l.createPostWithImage(e);console.log("\uD83D\uDCDD Post Service: Creating text-only post",{title:e.title,emotion:e.emotion,link:e.link});let i={title:e.title,content:e.content,is_anonymous:e.is_anonymous||!1,...e.emotion&&{emotion:e.emotion},...e.link&&{link:e.link},tags:e.tags},d=await s.FH.post("/posts",i);return console.log("✅ Post Service: Text post created",{id:(null==(a=d.data.data)?void 0:a.id)||"unknown",title:(null==(t=d.data.data)?void 0:t.title)||e.title,status:(null==(o=d.data.data)?void 0:o.status)||"pending",emotion:(null==(n=d.data.data)?void 0:n.emotion)||e.emotion,link:(null==(r=d.data.data)?void 0:r.link)||e.link}),d.data},updatePostWithImage:async(e,a)=>{var t,o,l,n,r;if(console.log("\uD83D\uDCDD Post Service: Updating post with image operations",{id:e,title:a.title,hasImage:!!a.image,removeImage:a.remove_image}),a.image||a.remove_image){let n=new FormData;a.title&&n.append("title",a.title),a.content&&n.append("content",a.content),a.remove_image&&n.append("remove_image","true"),a.tags&&a.tags.length>0&&a.tags.forEach((e,a)=>{n.append("tags[".concat(a,"]"),e)}),a.image&&(n.append("image",a.image),a.image_alt&&n.append("image_alt",a.image_alt));let r=await s.FH.put("/posts/".concat(e),n,{headers:{"Content-Type":"multipart/form-data"}});return console.log("✅ Post Service: Post with image updated",{id:(null==(t=r.data.data)?void 0:t.id)||e,title:(null==(o=r.data.data)?void 0:o.title)||"unknown",hasImage:!!(null==(l=r.data.data)?void 0:l.image)}),r.data}{let t=await s.FH.put("/posts/".concat(e),a);return console.log("✅ Post Service: Post updated",{id:(null==(n=t.data.data)?void 0:n.id)||e,title:(null==(r=t.data.data)?void 0:r.title)||"unknown"}),t.data}},updatePost:async(e,a)=>await l.updatePostWithImage(e,a),deletePost:async e=>{console.log("\uD83D\uDCDD Post Service: Deleting post",{id:e});let a=await s.FH.delete("/posts/".concat(e));return console.log("✅ Post Service: Post deleted",{id:e}),a.data},likePost:async e=>{var a;console.log("\uD83D\uDC4D Post Service: Liking post",{id:e});let t=await s.FH.post("/posts/".concat(e,"/like"));return console.log("✅ Post Service: Post liked",{id:e,like_count:(null==(a=t.data.data)?void 0:a.like_count)||"unknown"}),t.data},unlikePost:async e=>{var a,t;console.log("\uD83D\uDC4E Post Service: Unliking post with fallback methods",{id:e});try{console.log("\uD83D\uDC4E Post Service: Trying DELETE method for unlike");let t=await s.FH.delete("/posts/".concat(e,"/unlike"));return console.log("✅ Post Service: Post unliked with DELETE",{id:e,like_count:(null==(a=t.data.data)?void 0:a.like_count)||"unknown"}),t.data}catch(a){console.log("❌ Post Service: DELETE method failed for unlike, trying POST",{error:a});try{let a=await s.FH.post("/posts/".concat(e,"/unlike"));return console.log("✅ Post Service: Post unliked with POST",{id:e,like_count:(null==(t=a.data.data)?void 0:t.like_count)||"unknown"}),a.data}catch(e){throw console.log("❌ Post Service: POST method also failed for unlike"),e}}},getUserPosts:async e=>{var a;console.log("\uD83D\uDCDD Post Service: Fetching user posts",e);let t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.per_page)&&t.append("per_page",e.per_page.toString()),(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.search)&&t.append("search",e.search);let o="/user/posts".concat(t.toString()?"?".concat(t.toString()):""),l=await s.FH.get(o);return console.log("✅ Post Service: User posts fetched",{count:(null==(a=l.data.data.data)?void 0:a.length)||0,total:l.data.data.total,status:(null==e?void 0:e.status)||"all"}),l.data},getUserPostsByStatus:async(e,a)=>{var t;console.log("\uD83D\uDCDD Post Service: Fetching user posts by status",{status:e,params:a});let o=new URLSearchParams;o.append("status",e),(null==a?void 0:a.page)&&o.append("page",a.page.toString()),(null==a?void 0:a.per_page)&&o.append("per_page",a.per_page.toString()),(null==a?void 0:a.search)&&o.append("search",a.search);let l="/user/posts?".concat(o.toString()),n=await s.FH.get(l);return console.log("✅ Post Service: User posts by status fetched",{count:(null==(t=n.data.data.data)?void 0:t.length)||0,total:n.data.data.total,status:e}),n.data},getAllUserPosts:async e=>{var a;console.log("\uD83D\uDCDD Post Service: Fetching all user posts",e);let t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.per_page)&&t.append("per_page",e.per_page.toString()),(null==e?void 0:e.search)&&t.append("search",e.search);let o="/user/posts/all".concat(t.toString()?"?".concat(t.toString()):""),l=await s.FH.get(o);return console.log("✅ Post Service: All user posts fetched",{count:(null==(a=l.data.data.data)?void 0:a.length)||0,total:l.data.data.total}),l.data}},n=e=>"object"==typeof e&&null!==e&&"message"in e,r=(0,o.zD)("posts/getPublicPosts",async(e,a)=>{let{rejectWithValue:t}=a;try{return console.log("\uD83D\uDCE4 Post Slice: Starting get public posts"),(await l.getPublicPosts(e)).data}catch(s){var o;let e=s instanceof Error?s.message:"Failed to fetch posts",a=null==s||null==(o=s.response)?void 0:o.data;return console.error("❌ Post Slice: Get public posts failed",a||e),t(a||{message:e})}}),i=(0,o.zD)("posts/getPostById",async(e,a)=>{let{rejectWithValue:t}=a;try{return console.log("\uD83D\uDCE4 Post Slice: Starting get post by ID",{id:e}),(await l.getPostById(e)).data}catch(s){var o;let e=s instanceof Error?s.message:"Failed to fetch post",a=null==s||null==(o=s.response)?void 0:o.data;return console.error("❌ Post Slice: Get post by ID failed",a||e),t(a||{message:e})}}),d=(0,o.zD)("posts/createPost",async(e,a)=>{let{rejectWithValue:t}=a;try{return console.log("\uD83D\uDCE4 Post Slice: Starting create post"),(await l.createPost(e)).data}catch(s){var o;let e=s instanceof Error?s.message:"Failed to create post",a=null==s||null==(o=s.response)?void 0:o.data;return console.error("❌ Post Slice: Create post failed",a||e),t(a||{message:e})}}),c=(0,o.zD)("posts/updatePost",async(e,a)=>{let{id:t,payload:o}=e,{rejectWithValue:s}=a;try{return console.log("\uD83D\uDCE4 Post Slice: Starting update post",{id:t}),(await l.updatePost(t,o)).data}catch(t){var n;let e=t instanceof Error?t.message:"Failed to update post",a=null==t||null==(n=t.response)?void 0:n.data;return console.error("❌ Post Slice: Update post failed",a||e),s(a||{message:e})}}),g=(0,o.zD)("posts/deletePost",async(e,a)=>{let{rejectWithValue:t}=a;try{return console.log("\uD83D\uDCE4 Post Slice: Starting delete post",{id:e}),await l.deletePost(e),e}catch(s){var o;let e=s instanceof Error?s.message:"Failed to delete post",a=null==s||null==(o=s.response)?void 0:o.data;return console.error("❌ Post Slice: Delete post failed",a||e),t(a||{message:e})}}),u=(0,o.zD)("posts/likePost",async(e,a)=>{let{rejectWithValue:t}=a;try{console.log("\uD83D\uDCE4 Post Slice: Starting like post",{id:e});let a=await l.likePost(e);return{id:e,...a.data}}catch(s){var o;let e=s instanceof Error?s.message:"Failed to like post",a=null==s||null==(o=s.response)?void 0:o.data;return console.error("❌ Post Slice: Like post failed",a||e),t(a||{message:e})}}),p=(0,o.zD)("posts/unlikePost",async(e,a)=>{let{rejectWithValue:t}=a;try{console.log("\uD83D\uDCE4 Post Slice: Starting unlike post",{id:e});let a=await l.unlikePost(e);return{id:e,...a.data}}catch(s){var o;let e=s instanceof Error?s.message:"Failed to unlike post",a=null==s||null==(o=s.response)?void 0:o.data;return console.error("❌ Post Slice: Unlike post failed",a||e),t(a||{message:e})}}),m=(0,o.zD)("posts/getUserPosts",async(e,a)=>{let{rejectWithValue:t}=a;try{return console.log("\uD83D\uDCE4 Post Slice: Starting get user posts"),{data:(await l.getUserPosts(e)).data,params:e}}catch(s){var o;let e=s instanceof Error?s.message:"Failed to fetch user posts",a=null==s||null==(o=s.response)?void 0:o.data;return console.error("❌ Post Slice: Get user posts failed",a||e),t(a||{message:e})}}),y=(0,o.zD)("posts/getUserPostsByStatus",async(e,a)=>{let{status:t,params:o}=e,{rejectWithValue:s}=a;try{return console.log("\uD83D\uDCE4 Post Slice: Starting get user posts by status",{status:t}),{data:(await l.getUserPostsByStatus(t,o)).data,status:t,params:o}}catch(o){var n;let e=o instanceof Error?o.message:"Failed to fetch ".concat(t," posts"),a=null==o||null==(n=o.response)?void 0:n.data;return console.error("❌ Post Slice: Get user posts by status failed",a||e),s(a||{message:e})}}),P=(0,o.zD)("posts/getAllUserPosts",async(e,a)=>{let{rejectWithValue:t}=a;try{return console.log("\uD83D\uDCE4 Post Slice: Starting get all user posts"),{data:(await l.getAllUserPosts(e)).data,params:e}}catch(s){var o;let e=s instanceof Error?s.message:"Failed to fetch all user posts",a=null==s||null==(o=s.response)?void 0:o.data;return console.error("❌ Post Slice: Get all user posts failed",a||e),t(a||{message:e})}}),h=(0,o.Z0)({name:"posts",initialState:{publicPosts:[],publicPostsPagination:null,userPosts:[],userPostsPagination:null,userPostsByStatus:{pending:[],approved:[],rejected:[]},userPostsByStatusPagination:{pending:null,approved:null,rejected:null},currentPost:null,filters:{page:1,per_page:15,sort:"latest"},isLoading:!1,isCreating:!1,isUpdating:!1,isDeleting:!1,isLoadingByStatus:{pending:!1,approved:!1,rejected:!1},error:null},reducers:{clearError:e=>{e.error=null},setFilters:(e,a)=>{e.filters={...e.filters,...a.payload}},clearCurrentPost:e=>{e.currentPost=null},clearPosts:e=>{e.publicPosts=[],e.userPosts=[],e.publicPostsPagination=null,e.userPostsPagination=null}},extraReducers:e=>{e.addCase(r.pending,e=>{e.isLoading=!0,e.error=null,console.log("⏳ Post Slice: Get public posts pending")}).addCase(r.fulfilled,(e,a)=>{e.isLoading=!1,e.publicPosts=a.payload.data,e.publicPostsPagination={current_page:a.payload.current_page,last_page:a.payload.last_page,per_page:a.payload.per_page,total:a.payload.total,from:a.payload.from,to:a.payload.to},e.error=null,console.log("✅ Post Slice: Get public posts successful",{count:a.payload.data.length,total:a.payload.total})}).addCase(r.rejected,(e,a)=>{e.isLoading=!1,e.error=n(a.payload)?a.payload.message:"Failed to fetch posts",console.log("❌ Post Slice: Get public posts rejected",e.error)}),e.addCase(i.pending,e=>{e.isLoading=!0,e.error=null,console.log("⏳ Post Slice: Get post by ID pending")}).addCase(i.fulfilled,(e,a)=>{e.isLoading=!1,e.currentPost=a.payload,e.error=null,console.log("✅ Post Slice: Get post by ID successful",{id:a.payload.id,title:a.payload.title})}).addCase(i.rejected,(e,a)=>{e.isLoading=!1,e.error=n(a.payload)?a.payload.message:"Failed to fetch post",console.log("❌ Post Slice: Get post by ID rejected",e.error)}),e.addCase(d.pending,e=>{e.isCreating=!0,e.error=null,console.log("⏳ Post Slice: Create post pending")}).addCase(d.fulfilled,(e,a)=>{e.isCreating=!1,e.userPosts.unshift(a.payload),e.error=null,console.log("✅ Post Slice: Create post successful",{id:a.payload.id,title:a.payload.title,status:a.payload.status})}).addCase(d.rejected,(e,a)=>{e.isCreating=!1,e.error=n(a.payload)?a.payload.message:"Failed to create post",console.log("❌ Post Slice: Create post rejected",e.error)}),e.addCase(c.pending,e=>{e.isUpdating=!0,e.error=null,console.log("⏳ Post Slice: Update post pending")}).addCase(c.fulfilled,(e,a)=>{var t;e.isUpdating=!1;let o=e.userPosts.findIndex(e=>e.id===a.payload.id);-1!==o&&(e.userPosts[o]=a.payload);let s=e.publicPosts.findIndex(e=>e.id===a.payload.id);-1!==s&&(e.publicPosts[s]=a.payload),(null==(t=e.currentPost)?void 0:t.id)===a.payload.id&&(e.currentPost=a.payload),e.error=null,console.log("✅ Post Slice: Update post successful",{id:a.payload.id,title:a.payload.title})}).addCase(c.rejected,(e,a)=>{e.isUpdating=!1,e.error=n(a.payload)?a.payload.message:"Failed to update post",console.log("❌ Post Slice: Update post rejected",e.error)}),e.addCase(g.pending,e=>{e.isDeleting=!0,e.error=null,console.log("⏳ Post Slice: Delete post pending")}).addCase(g.fulfilled,(e,a)=>{var t;e.isDeleting=!1,e.userPosts=e.userPosts.filter(e=>e.id!==a.payload),e.publicPosts=e.publicPosts.filter(e=>e.id!==a.payload),(null==(t=e.currentPost)?void 0:t.id)===a.payload&&(e.currentPost=null),e.error=null,console.log("✅ Post Slice: Delete post successful",{id:a.payload})}).addCase(g.rejected,(e,a)=>{e.isDeleting=!1,e.error=n(a.payload)?a.payload.message:"Failed to delete post",console.log("❌ Post Slice: Delete post rejected",e.error)}),e.addCase(u.fulfilled,(e,a)=>{var t;let{id:o,like_count:s,user_has_liked:l}=a.payload,n=e=>{let a=e.findIndex(e=>e.id===o);-1!==a&&(e[a].like_count=s,e[a].is_liked_by_user=l)};n(e.publicPosts),n(e.userPosts),(null==(t=e.currentPost)?void 0:t.id)===o&&(e.currentPost.like_count=s,e.currentPost.is_liked_by_user=l),console.log("✅ Post Slice: Like post successful",{id:o,like_count:s,user_has_liked:l})}),e.addCase(p.fulfilled,(e,a)=>{var t;let{id:o,like_count:s,user_has_liked:l}=a.payload,n=e=>{let a=e.findIndex(e=>e.id===o);-1!==a&&(e[a].like_count=s,e[a].is_liked_by_user=l)};n(e.publicPosts),n(e.userPosts),(null==(t=e.currentPost)?void 0:t.id)===o&&(e.currentPost.like_count=s,e.currentPost.is_liked_by_user=l),console.log("✅ Post Slice: Unlike post successful",{id:o,like_count:s,user_has_liked:l})}),e.addCase(m.pending,e=>{e.isLoading=!0,e.error=null,console.log("⏳ Post Slice: Get user posts pending")}).addCase(m.fulfilled,(e,a)=>{var t;e.isLoading=!1,e.userPosts=a.payload.data.data,e.userPostsPagination={current_page:a.payload.data.current_page,last_page:a.payload.data.last_page,per_page:a.payload.data.per_page,total:a.payload.data.total,from:a.payload.data.from,to:a.payload.data.to},e.error=null,console.log("✅ Post Slice: Get user posts successful",{count:a.payload.data.data.length,status:(null==(t=a.payload.params)?void 0:t.status)||"all"})}).addCase(m.rejected,(e,a)=>{e.isLoading=!1,e.error=n(a.payload)?a.payload.message:"Failed to fetch user posts",console.log("❌ Post Slice: Get user posts rejected",e.error)}),e.addCase(y.pending,(e,a)=>{let t=a.meta.arg.status;e.isLoadingByStatus[t]=!0,e.error=null,console.log("⏳ Post Slice: Get user posts by status pending",{status:t})}).addCase(y.fulfilled,(e,a)=>{let{status:t}=a.payload;e.isLoadingByStatus[t]=!1,e.userPostsByStatus[t]=a.payload.data.data,e.userPostsByStatusPagination[t]={current_page:a.payload.data.current_page,last_page:a.payload.data.last_page,per_page:a.payload.data.per_page,total:a.payload.data.total,from:a.payload.data.from,to:a.payload.data.to},e.error=null,console.log("✅ Post Slice: Get user posts by status successful",{count:a.payload.data.data.length,status:t})}).addCase(y.rejected,(e,a)=>{let t=a.meta.arg.status;e.isLoadingByStatus[t]=!1,e.error=n(a.payload)?a.payload.message:"Failed to fetch ".concat(t," posts"),console.log("❌ Post Slice: Get user posts by status rejected",{status:t,error:e.error})}),e.addCase(P.pending,e=>{e.isLoading=!0,e.error=null,console.log("⏳ Post Slice: Get all user posts pending")}).addCase(P.fulfilled,(e,a)=>{e.isLoading=!1,e.userPosts=a.payload.data.data,e.userPostsPagination={current_page:a.payload.data.current_page,last_page:a.payload.data.last_page,per_page:a.payload.data.per_page,total:a.payload.data.total,from:a.payload.data.from,to:a.payload.data.to},e.error=null,console.log("✅ Post Slice: Get all user posts successful",{count:a.payload.data.data.length})}).addCase(P.rejected,(e,a)=>{e.isLoading=!1,e.error=n(a.payload)?a.payload.message:"Failed to fetch all user posts",console.log("❌ Post Slice: Get all user posts rejected",e.error)})}}),{clearError:v,setFilters:f,clearCurrentPost:S,clearPosts:C}=h.actions,k=h.reducer},13984:(e,a,t)=>{t.d(a,{Ay:()=>h,FH:()=>o,O5:()=>p,rG:()=>u,sw:()=>P});let o=t(23464).A.create({baseURL:"/api/proxy",headers:{"Content-Type":"application/json",Accept:"application/json"},timeout:1e4,withCredentials:!1}),s=null,l=!1,n="mindspeak_auth_backup",r="mindspeak_auth_cleared",i=()=>{try{localStorage.setItem(r,JSON.stringify({cleared:!0,timestamp:Date.now()})),console.log("\uD83D\uDEAB API: Auth marked as intentionally cleared")}catch(e){console.warn("⚠️ API: Failed to mark auth as cleared:",e)}},d=()=>{try{let e=localStorage.getItem(r);if(e){let a=JSON.parse(e);if(Date.now()-a.timestamp<3e5)return console.log("\uD83D\uDEAB API: Auth was intentionally cleared recently"),!0;localStorage.removeItem(r)}}catch(e){console.warn("⚠️ API: Error checking cleared flag:",e)}return!1},c=(e,a)=>{try{if(d())return void console.log("\uD83D\uDEAB API: Skipping backup creation - auth was intentionally cleared");let t={token:e,user:a,timestamp:Date.now(),isAuthenticated:!0};localStorage.setItem(n,JSON.stringify(t)),console.log("\uD83D\uDD10 API: Auth backup created for HMR protection")}catch(e){console.warn("⚠️ API: Failed to create auth backup:",e)}},g=()=>{try{if(d())return console.log("\uD83D\uDEAB API: Skipping backup restoration - auth was intentionally cleared"),{token:null,user:null};let e=localStorage.getItem(n);if(e){let a=JSON.parse(e);if(Date.now()-a.timestamp<864e5)return console.log("\uD83D\uDD04 API: Restoring auth from backup"),{token:a.token,user:a.user}}}catch(e){console.warn("⚠️ API: Failed to restore from backup:",e)}return{token:null,user:null}},u=()=>{console.log("\uD83E\uDDF9 API: Starting comprehensive auth data clearance"),i(),s=null,l=!0;try{localStorage.removeItem("persist:auth"),console.log("\uD83E\uDDF9 API: Redux persist auth data cleared"),localStorage.removeItem(n),console.log("\uD83E\uDDF9 API: Backup auth data cleared");let e=[];for(let a=0;a<localStorage.length;a++){let t=localStorage.key(a);t&&t!==r&&(t.includes("auth")||t.includes("token")||t.includes("mindspeak"))&&e.push(t)}e.forEach(e=>{localStorage.removeItem(e),console.log("\uD83E\uDDF9 API: Cleared additional auth key: ".concat(e))}),sessionStorage.clear(),console.log("\uD83E\uDDF9 API: Session storage cleared"),console.log("✅ API: Complete auth data clearance finished")}catch(e){console.error("❌ API: Error during auth data clearance:",e)}},p=(e,a)=>{s=e,l=!0,e?(console.log("\uD83D\uDD10 API: Auth token set successfully"),c(e,a)):(console.log("\uD83D\uDD13 API: Auth token cleared"),localStorage.removeItem(n))},m=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;return new Promise(a=>{if(l)return void a();let t=0,o=e/100,s=setInterval(()=>{t++,l?(clearInterval(s),a()):t>=o&&(clearInterval(s),console.warn("⚠️ API: Token initialization timeout - proceeding without token"),a())},100)})},y=()=>{try{let e=localStorage.getItem("persist:auth");if(e){let a=JSON.parse(e),t=JSON.parse(a.token||"null");if(t)return console.log("\uD83D\uDD04 API: Token found in Redux persist storage"),t}console.log("⚠️ API: Redux persist token not found, trying backup");let a=g();if(a.token)return console.log("\uD83D\uDD04 API: Token restored from backup"),a.token;return console.log("❌ API: No token found in storage or backup"),null}catch(e){return console.warn("⚠️ API: Error reading token from storage:",e),null}};o.interceptors.request.use(async e=>{try{var a;console.log("\uD83D\uDD0D API: Request interceptor running for:",e.url),console.log("\uD83D\uDD0D API: Request method:",e.method),console.log("\uD83D\uDD0D API: Base URL:",e.baseURL),console.log("\uD83D\uDD0D API: Full URL:","".concat(e.baseURL).concat(e.url)),console.log("\uD83D\uDD0D API: Current headers:",e.headers),console.log("\uD83D\uDD0D API: With credentials:",e.withCredentials),l||(console.log("⏳ API: Waiting for token initialization..."),await m());let t="/login"===e.url||"/register"===e.url;if(console.log("\uD83D\uDD0D API: Is auth endpoint?",t,"for URL:",e.url),t)console.log("\uD83D\uDD13 API: Skipping token attachment for auth endpoint"),e.headers&&e.headers.Authorization&&(delete e.headers.Authorization,console.log("\uD83E\uDDF9 API: Removed Authorization header from auth endpoint"));else{let a=s||y();a?(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(a),console.log("\uD83D\uDD10 API: Bearer token attached to request"),console.log("\uD83D\uDD0D API: Token preview:",a.substring(0,20)+"...")):console.log("\uD83D\uDD13 API: No auth token available for protected endpoint")}return console.log("\uD83D\uDD0D API: Final headers being sent:",JSON.stringify(e.headers,null,2)),console.log("\uD83D\uDD0D API: Final config:",{url:e.url,method:e.method,baseURL:e.baseURL,withCredentials:e.withCredentials}),console.log("\uD83D\uDCE4 API: ".concat(null==(a=e.method)?void 0:a.toUpperCase()," ").concat(e.url)),e}catch(a){return console.error("❌ API: Request interceptor failed:",a),e}},e=>(console.error("❌ API: Request interceptor error:",e),Promise.reject(e))),o.interceptors.response.use(e=>{var a,t,o;return console.log("✅ API: ".concat(null==(a=e.config.method)?void 0:a.toUpperCase()," ").concat(e.config.url," - ").concat(e.status)),(null==(o=e.data)||null==(t=o.data)?void 0:t.token)&&(p(e.data.data.token,e.data.data.user),console.log("\uD83D\uDD10 API: New auth token received and stored")),e},async e=>{var a,t,o,s,l,n,r,i;let d=e.config;if(console.error("❌ API: ".concat(null==d||null==(a=d.method)?void 0:a.toUpperCase()," ").concat(null==d?void 0:d.url," - ").concat((null==(t=e.response)?void 0:t.status)||"Network Error")),(null==(o=e.response)?void 0:o.status)===401){console.warn("⚠️ API: Unauthorized access - token may be invalid or expired"),u();{let e=window.location.pathname;e.includes("/login")||e.includes("/auth")||e.includes("/testing")||(console.log("\uD83D\uDD04 API: Redirecting to home page after unauthorized error"),setTimeout(()=>{window.location.href="/"},100))}e.message="Authentication required. Please login again."}return(null==(s=e.response)?void 0:s.status)===403&&(console.warn("⚠️ API: Access forbidden - insufficient permissions"),e.message="Access denied. You do not have permission to access this resource."),(null==(l=e.response)?void 0:l.status)===422&&(console.warn("⚠️ API: Validation errors detected",e.response.data),e.message=(null==(i=e.response.data)?void 0:i.message)||"Validation failed"),(null==(n=e.response)?void 0:n.status)===419&&(console.error("❌ API: CSRF token error detected - this should not happen with token-based authentication"),console.error("❌ API: Check your Laravel configuration - ensure you are using token-based auth"),e.message="Authentication configuration error. Please contact support."),e.response||(e.message="Network error - please check your connection and ensure the backend server is running",console.error("\uD83C\uDF10 API: Network error detected - backend may be down")),(null==(r=e.response)?void 0:r.data)&&console.error("\uD83D\uDCCB API: Error details:",e.response.data),Promise.reject(e)});let P=()=>{if(d()){console.log("\uD83D\uDEAB API: Skipping token initialization - auth was intentionally cleared"),l=!0;return}let e=y();e?(p(e),console.log("\uD83D\uDD10 API: Auth token initialized from storage")):(l=!0,console.log("\uD83D\uDD13 API: No stored token found - marked as initialized"))},h=o},16860:(e,a,t)=>{t.d(a,{ET:()=>w,VO:()=>C,Ay:()=>_,Os:()=>u,Xo:()=>P,fn:()=>j,IQ:()=>L,cr:()=>M,S6:()=>T,p8:()=>U,H1:()=>D,a7:()=>F,YQ:()=>b,_z:()=>p,LE:()=>f,lg:()=>I});var o=t(66439);let s={userMessages:[],adminMessages:[],userPagination:null,adminPagination:null,userFilters:{page:1,per_page:15},adminFilters:{page:1,per_page:15},loading:{fetchUserMessages:!1,sendMessage:!1,fetchAdminMessages:!1,replyToMessage:!1},error:null};var l=t(13984);let n=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let a=new URLSearchParams;e.page&&a.append("page",e.page.toString()),e.per_page&&a.append("per_page",e.per_page.toString()),e.status&&a.append("status",e.status),e.search&&a.append("search",e.search);let t=a.toString();return(await l.Ay.get("/messages".concat(t?"?".concat(t):""))).data}catch(e){var a,t,o,s;throw console.error("Get user messages error:",e),{success:!1,message:(null==e||null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"Failed to fetch messages",errors:null==e||null==(s=e.response)||null==(o=s.data)?void 0:o.errors}}},r=async e=>{try{let a={...e,to_admin_id:1};return(await l.Ay.post("/messages",a)).data}catch(e){var a,t,o,s;throw console.error("Send message error:",e),{success:!1,message:(null==e||null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"Failed to send message",errors:null==e||null==(s=e.response)||null==(o=s.data)?void 0:o.errors}}},i=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let a=new URLSearchParams;e.page&&a.append("page",e.page.toString()),e.per_page&&a.append("per_page",e.per_page.toString()),e.status&&a.append("status",e.status),e.search&&a.append("search",e.search);let t=a.toString();return(await l.Ay.get("/admin/messages".concat(t?"?".concat(t):""))).data}catch(e){var a,t,o,s;throw console.error("Get admin messages error:",e),{success:!1,message:(null==e||null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"Failed to fetch admin messages",errors:null==e||null==(s=e.response)||null==(o=s.data)?void 0:o.errors}}},d=async e=>{try{let{messageId:a,content:t}=e;return(await l.Ay.post("/admin/messages/".concat(a,"/reply"),{content:t})).data}catch(e){var a,t,o,s;throw console.error("Reply to message error:",e),{success:!1,message:(null==e||null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"Failed to reply to message",errors:null==e||null==(s=e.response)||null==(o=s.data)?void 0:o.errors}}},c=async e=>{try{return await n(e)}catch(e){throw console.error("Load more user messages error:",e),e}},g=async e=>{try{return await i(e)}catch(e){throw console.error("Load more admin messages error:",e),e}},u=(0,o.zD)("messages/fetchUserMessages",async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{rejectWithValue:a}=arguments.length>1?arguments[1]:void 0;try{return await n(e)}catch(e){return a((null==e?void 0:e.message)||"Failed to fetch user messages")}}),p=(0,o.zD)("messages/sendMessage",async(e,a)=>{let{rejectWithValue:t}=a;try{return await r(e)}catch(e){return t((null==e?void 0:e.message)||"Failed to send message")}}),m=(0,o.zD)("messages/fetchAdminMessages",async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{rejectWithValue:a}=arguments.length>1?arguments[1]:void 0;try{return await i(e)}catch(e){return a((null==e?void 0:e.message)||"Failed to fetch admin messages")}}),y=(0,o.zD)("messages/replyToMessage",async(e,a)=>{let{rejectWithValue:t}=a;try{return{...await d(e),messageId:e.messageId}}catch(e){return t((null==e?void 0:e.message)||"Failed to reply to message")}}),P=(0,o.zD)("messages/loadMoreUserMessages",async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{rejectWithValue:a,getState:t}=arguments.length>1?arguments[1]:void 0;try{var o;let a=(null==(o=t().messages.userPagination)?void 0:o.current_page)||1;return await c({...e,page:a+1})}catch(e){return a((null==e?void 0:e.message)||"Failed to load more user messages")}}),h=(0,o.zD)("messages/loadMoreAdminMessages",async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{rejectWithValue:a,getState:t}=arguments.length>1?arguments[1]:void 0;try{var o;let a=(null==(o=t().messages.adminPagination)?void 0:o.current_page)||1;return await g({...e,page:a+1})}catch(e){return a((null==e?void 0:e.message)||"Failed to load more admin messages")}}),v=(0,o.Z0)({name:"messages",initialState:s,reducers:{setUserFilters:(e,a)=>{e.userFilters={...e.userFilters,...a.payload},(void 0!==a.payload.status||void 0!==a.payload.search)&&(e.userFilters.page=1)},setAdminFilters:(e,a)=>{e.adminFilters={...e.adminFilters,...a.payload},(void 0!==a.payload.status||void 0!==a.payload.search)&&(e.adminFilters.page=1)},clearUserMessages:e=>{e.userMessages=[],e.userPagination=null,e.error=null},clearAdminMessages:e=>{e.adminMessages=[],e.adminPagination=null,e.error=null},clearError:e=>{e.error=null},resetState:()=>s,updateMessageStatus:(e,a)=>{let{messageId:t,status:o}=a.payload;Array.isArray(e.userMessages)||(e.userMessages=[]),Array.isArray(e.adminMessages)||(e.adminMessages=[]);let s=e.userMessages.findIndex(e=>e.id===t);-1!==s&&(e.userMessages[s].status=o);let l=e.adminMessages.findIndex(e=>e.id===t);-1!==l&&(e.adminMessages[l].status=o)}},extraReducers:e=>{e.addCase(u.pending,e=>{e.loading.fetchUserMessages=!0,e.error=null}).addCase(u.fulfilled,(e,a)=>{e.loading.fetchUserMessages=!1,e.userMessages=a.payload.data,e.userPagination=a.payload.meta.pagination}).addCase(u.rejected,(e,a)=>{e.loading.fetchUserMessages=!1,e.error=a.payload}),e.addCase(P.pending,e=>{e.loading.fetchUserMessages=!0,e.error=null}).addCase(P.fulfilled,(e,a)=>{e.loading.fetchUserMessages=!1,Array.isArray(e.userMessages)||(e.userMessages=[]),e.userMessages=[...e.userMessages,...a.payload.data],e.userPagination=a.payload.meta.pagination}).addCase(P.rejected,(e,a)=>{e.loading.fetchUserMessages=!1,e.error=a.payload}),e.addCase(p.pending,e=>{e.loading.sendMessage=!0,e.error=null}).addCase(p.fulfilled,(e,a)=>{let t;if(e.loading.sendMessage=!1,Array.isArray(e.userMessages)||(e.userMessages=[]),a.payload&&a.payload.data&&a.payload.data.message)t=a.payload.data.message;else{if(!a.payload||"object"!=typeof a.payload||!("id"in a.payload))return void console.error("Unexpected sendMessage response structure:",a.payload);t=a.payload}e.userMessages=[t,...e.userMessages]}).addCase(p.rejected,(e,a)=>{e.loading.sendMessage=!1,e.error=a.payload}),e.addCase(m.pending,e=>{e.loading.fetchAdminMessages=!0,e.error=null}).addCase(m.fulfilled,(e,a)=>{e.loading.fetchAdminMessages=!1,e.adminMessages=a.payload.data,e.adminPagination=a.payload.meta.pagination}).addCase(m.rejected,(e,a)=>{e.loading.fetchAdminMessages=!1,e.error=a.payload}),e.addCase(h.pending,e=>{e.loading.fetchAdminMessages=!0,e.error=null}).addCase(h.fulfilled,(e,a)=>{e.loading.fetchAdminMessages=!1,Array.isArray(e.adminMessages)||(e.adminMessages=[]),e.adminMessages=[...e.adminMessages,...a.payload.data],e.adminPagination=a.payload.meta.pagination}).addCase(h.rejected,(e,a)=>{e.loading.fetchAdminMessages=!1,e.error=a.payload}),e.addCase(y.pending,e=>{e.loading.replyToMessage=!0,e.error=null}).addCase(y.fulfilled,(e,a)=>{e.loading.replyToMessage=!1;let{messageId:t}=a.payload,o=a.payload.data.message,s=e.adminMessages.findIndex(e=>e.id===t);-1!==s&&(e.adminMessages[s]=o)}).addCase(y.rejected,(e,a)=>{e.loading.replyToMessage=!1,e.error=a.payload})}}),{setUserFilters:f,setAdminFilters:S,clearUserMessages:C,clearAdminMessages:k,clearError:w,resetState:A,updateMessageStatus:I}=v.actions,_=v.reducer,F=e=>e.messages.userMessages||[],b=e=>e.messages.userPagination,D=e=>e.messages.userFilters,M=e=>e.messages.loading,L=e=>e.messages.error,U=e=>{var a;return(null==(a=e.messages.userMessages)?void 0:a.filter(e=>"unread"===e.status))||[]},T=e=>{var a;return(null==(a=e.messages.userMessages)?void 0:a.filter(e=>"responded"===e.status))||[]},j=e=>{let a=e.messages.userPagination;return!!a&&a.has_more_pages}},28052:(e,a,t)=>{t.d(a,{eT:()=>r,Ay:()=>P,rq:()=>n});var o=t(66439),s=t(13984);let l={getPostComments:async(e,a)=>{var t,o,l,n;console.log("\uD83D\uDCAC Comment Service: Fetching comments for post",{postId:e,params:a});let r=new URLSearchParams;(null==a?void 0:a.page)&&r.append("page",a.page.toString()),(null==a?void 0:a.per_page)&&r.append("per_page",a.per_page.toString());let i="/posts/".concat(e,"/comments").concat(r.toString()?"?".concat(r.toString()):""),d=await s.FH.get(i);return console.log("✅ Comment Service: Comments fetched",{postId:e,count:(null==(t=d.data.data)?void 0:t.length)||0,total:(null==(l=d.data.meta)||null==(o=l.pagination)?void 0:o.total)||0}),{success:d.data.success,message:d.data.message,data:{comments:d.data.data||[],pagination:(null==(n=d.data.meta)?void 0:n.pagination)||null}}},createComment:async(e,a)=>{var t,o;console.log("\uD83D\uDCAC Comment Service: Creating comment",{postId:e,contentLength:a.content.length,isAnonymous:a.is_anonymous});let l=await s.FH.post("/posts/".concat(e,"/comments"),a);return console.log("✅ Comment Service: Comment created",{commentId:(null==(t=l.data.data)?void 0:t.id)||"unknown",postId:e,status:(null==(o=l.data.data)?void 0:o.status)||"pending"}),{success:l.data.success,message:l.data.message,data:{comment:l.data.data}}},updateComment:async(e,a)=>{var t,o;console.log("\uD83D\uDCAC Comment Service: Updating comment",{commentId:e,contentLength:a.content.length});let l=await s.FH.put("/comments/".concat(e),a);return console.log("✅ Comment Service: Comment updated",{commentId:(null==(t=l.data.data)?void 0:t.id)||e,status:(null==(o=l.data.data)?void 0:o.status)||"pending"}),{success:l.data.success,message:l.data.message,data:{comment:l.data.data}}},deleteComment:async e=>{console.log("\uD83D\uDCAC Comment Service: Deleting comment",{id:e});let a=await s.FH.delete("/comments/".concat(e));return console.log("✅ Comment Service: Comment deleted",{id:e}),{success:a.data.success,message:a.data.message}}},n=(0,o.zD)("comments/getPostComments",async(e,a)=>{let{postId:t,params:o}=e,{rejectWithValue:s}=a;try{console.log("\uD83D\uDCE4 Comment Slice: Starting get post comments",{postId:t});let e=await l.getPostComments(t,o);return{postId:t,...e.data}}catch(e){var n,r;return console.error("❌ Comment Slice: Get post comments failed",(null==(n=e.response)?void 0:n.data)||e.message),s((null==(r=e.response)?void 0:r.data)||{message:"Failed to fetch comments"})}}),r=(0,o.zD)("comments/createComment",async(e,a)=>{let{postId:t,payload:o}=e,{rejectWithValue:s}=a;try{console.log("\uD83D\uDCE4 Comment Slice: Starting create comment",{postId:t});let e=await l.createComment(t,o);return{postId:t,comment:e.data.comment}}catch(e){var n,r;return console.error("❌ Comment Slice: Create comment failed",(null==(n=e.response)?void 0:n.data)||e.message),s((null==(r=e.response)?void 0:r.data)||{message:"Failed to create comment"})}}),i=(0,o.zD)("comments/updateComment",async(e,a)=>{let{commentId:t,payload:o}=e,{rejectWithValue:s}=a;try{return console.log("\uD83D\uDCE4 Comment Slice: Starting update comment",{commentId:t}),(await l.updateComment(t,o)).data.comment}catch(e){var n,r;return console.error("❌ Comment Slice: Update comment failed",(null==(n=e.response)?void 0:n.data)||e.message),s((null==(r=e.response)?void 0:r.data)||{message:"Failed to update comment"})}}),d=(0,o.zD)("comments/deleteComment",async(e,a)=>{let{commentId:t,postId:o}=e,{rejectWithValue:s}=a;try{return console.log("\uD83D\uDCE4 Comment Slice: Starting delete comment",{commentId:t,postId:o}),await l.deleteComment(t),{commentId:t,postId:o}}catch(e){var n,r;return console.error("❌ Comment Slice: Delete comment failed",(null==(n=e.response)?void 0:n.data)||e.message),s((null==(r=e.response)?void 0:r.data)||{message:"Failed to delete comment"})}}),c=(0,o.Z0)({name:"comments",initialState:{commentsByPost:{},paginationByPost:{},userComments:[],userCommentsPagination:null,isLoading:!1,isCreating:!1,isUpdating:!1,isDeleting:!1,error:null},reducers:{clearError:e=>{e.error=null},clearPostComments:(e,a)=>{let t=a.payload;delete e.commentsByPost[t],delete e.paginationByPost[t]},clearAllComments:e=>{e.commentsByPost={},e.paginationByPost={},e.userComments=[],e.userCommentsPagination=null},addOptimisticComment:(e,a)=>{let{postId:t,comment:o}=a.payload;e.commentsByPost[t]||(e.commentsByPost[t]=[]),e.commentsByPost[t].push(o)},removeOptimisticComment:(e,a)=>{let{postId:t,tempId:o}=a.payload;e.commentsByPost[t]&&(e.commentsByPost[t]=e.commentsByPost[t].filter(e=>e.id!==o))}},extraReducers:e=>{e.addCase(n.pending,e=>{e.isLoading=!0,e.error=null,console.log("⏳ Comment Slice: Get post comments pending")}).addCase(n.fulfilled,(e,a)=>{e.isLoading=!1;let{postId:t,comments:o,pagination:s}=a.payload;e.commentsByPost[t]=o||[],e.paginationByPost[t]=s||null,e.error=null,console.log("✅ Comment Slice: Get post comments successful",{postId:t,count:(null==o?void 0:o.length)||0,total:(null==s?void 0:s.total)||0})}).addCase(n.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload?"string"==typeof a.payload?a.payload:a.payload.message||"Failed to fetch comments":"Failed to fetch comments",console.log("❌ Comment Slice: Get post comments rejected",e.error)}),e.addCase(r.pending,e=>{e.isCreating=!0,e.error=null,console.log("⏳ Comment Slice: Create comment pending")}).addCase(r.fulfilled,(e,a)=>{e.isCreating=!1;let{postId:t,comment:o}=a.payload;e.commentsByPost[t]&&(e.commentsByPost[t].push(o),e.paginationByPost[t]&&(e.paginationByPost[t].total+=1)),e.userComments.unshift(o),e.userCommentsPagination&&(e.userCommentsPagination.total+=1),e.error=null,console.log("✅ Comment Slice: Create comment successful",{commentId:(null==o?void 0:o.id)||"unknown",postId:t,status:(null==o?void 0:o.status)||"pending"})}).addCase(r.rejected,(e,a)=>{e.isCreating=!1,e.error=a.payload?"string"==typeof a.payload?a.payload:a.payload.message||"Failed to create comment":"Failed to create comment",console.log("❌ Comment Slice: Create comment rejected",e.error)}),e.addCase(i.pending,e=>{e.isUpdating=!0,e.error=null,console.log("⏳ Comment Slice: Update comment pending")}).addCase(i.fulfilled,(e,a)=>{e.isUpdating=!1;let t=a.payload;Object.keys(e.commentsByPost).forEach(a=>{let o=Number(a),s=e.commentsByPost[o].findIndex(e=>e.id===t.id);-1!==s&&(e.commentsByPost[o][s]=t)});let o=e.userComments.findIndex(e=>e.id===t.id);-1!==o&&(e.userComments[o]=t),e.error=null,console.log("✅ Comment Slice: Update comment successful",{commentId:(null==t?void 0:t.id)||"unknown",status:(null==t?void 0:t.status)||"unknown"})}).addCase(i.rejected,(e,a)=>{e.isUpdating=!1,e.error=a.payload?"string"==typeof a.payload?a.payload:a.payload.message||"Failed to update comment":"Failed to update comment",console.log("❌ Comment Slice: Update comment rejected",e.error)}),e.addCase(d.pending,e=>{e.isDeleting=!0,e.error=null,console.log("⏳ Comment Slice: Delete comment pending")}).addCase(d.fulfilled,(e,a)=>{e.isDeleting=!1;let{commentId:t,postId:o}=a.payload;e.commentsByPost[o]&&(e.commentsByPost[o]=e.commentsByPost[o].filter(e=>e.id!==t),e.paginationByPost[o]&&e.paginationByPost[o].total>0&&(e.paginationByPost[o].total-=1)),e.userComments=e.userComments.filter(e=>e.id!==t),e.userCommentsPagination&&e.userCommentsPagination.total>0&&(e.userCommentsPagination.total-=1),e.error=null,console.log("✅ Comment Slice: Delete comment successful",{commentId:t,postId:o})}).addCase(d.rejected,(e,a)=>{e.isDeleting=!1,e.error=a.payload?"string"==typeof a.payload?a.payload:a.payload.message||"Failed to delete comment":"Failed to delete comment",console.log("❌ Comment Slice: Delete comment rejected",e.error)})}}),{clearError:g,clearPostComments:u,clearAllComments:p,addOptimisticComment:m,removeOptimisticComment:y}=c.actions,P=c.reducer},41480:(e,a,t)=>{t.d(a,{Ay:()=>p});var o=t(66439),s=t(13984);let l={getTags:async()=>{console.log("\uD83C\uDFF7️ Tag Service: Fetching all tags");let e=await s.FH.get("/tags");return console.log("✅ Tag Service: Tags fetched successfully",{tagCount:e.data.data.tags.length}),e.data},createTag:async e=>{console.log("\uD83C\uDFF7️ Tag Service: Creating new tag",{name:e.name});let a=await s.FH.post("/tags",e);return console.log("✅ Tag Service: Tag created successfully",{tagId:a.data.data.tag.id,tagName:a.data.data.tag.name}),a.data},deleteTag:async e=>{console.log("\uD83C\uDFF7️ Tag Service: Deleting tag",{tagId:e});let a=await s.FH.delete("/tags/".concat(e));return console.log("✅ Tag Service: Tag deleted successfully",{tagId:e}),a.data}},n=(0,o.zD)("tags/getTags",async(e,a)=>{let{rejectWithValue:t}=a;try{return console.log("\uD83D\uDCE4 Tag Slice: Fetching all tags"),(await l.getTags()).data.tags}catch(e){var o,s;return console.error("❌ Tag Slice: Get tags failed",(null==(o=e.response)?void 0:o.data)||e.message),t((null==(s=e.response)?void 0:s.data)||{message:"Failed to fetch tags"})}}),r=(0,o.zD)("tags/createTag",async(e,a)=>{let{rejectWithValue:t}=a;try{return console.log("\uD83D\uDCE4 Tag Slice: Creating new tag"),(await l.createTag(e)).data.tag}catch(e){var o,s;return console.error("❌ Tag Slice: Create tag failed",(null==(o=e.response)?void 0:o.data)||e.message),t((null==(s=e.response)?void 0:s.data)||{message:"Failed to create tag"})}}),i=(0,o.zD)("tags/deleteTag",async(e,a)=>{let{rejectWithValue:t}=a;try{return console.log("\uD83D\uDCE4 Tag Slice: Deleting tag"),await l.deleteTag(e),e}catch(e){var o,s;return console.error("❌ Tag Slice: Delete tag failed",(null==(o=e.response)?void 0:o.data)||e.message),t((null==(s=e.response)?void 0:s.data)||{message:"Failed to delete tag"})}}),d=(0,o.Z0)({name:"tags",initialState:{tags:[],isLoading:!1,error:null,createLoading:!1,deleteLoading:{}},reducers:{clearError:e=>{e.error=null},resetCreateLoading:e=>{e.createLoading=!1},resetDeleteLoading:(e,a)=>{delete e.deleteLoading[a.payload]}},extraReducers:e=>{e.addCase(n.pending,e=>{e.isLoading=!0,e.error=null,console.log("⏳ Tag Slice: Get tags pending")}).addCase(n.fulfilled,(e,a)=>{e.isLoading=!1,e.tags=a.payload,e.error=null,console.log("✅ Tag Slice: Get tags successful",{tagCount:a.payload.length})}).addCase(n.rejected,(e,a)=>{var t;e.isLoading=!1,e.error="object"==typeof a.payload&&a.payload&&"message"in a.payload?null!=(t=a.payload.message)?t:null:"Failed to fetch tags",console.log("❌ Tag Slice: Get tags rejected",e.error)}),e.addCase(r.pending,e=>{e.createLoading=!0,e.error=null,console.log("⏳ Tag Slice: Create tag pending")}).addCase(r.fulfilled,(e,a)=>{e.createLoading=!1,e.tags.push(a.payload),e.error=null,console.log("✅ Tag Slice: Create tag successful",{tagName:a.payload.name,tagId:a.payload.id})}).addCase(r.rejected,(e,a)=>{var t;e.createLoading=!1,e.error="object"==typeof a.payload&&a.payload&&"message"in a.payload?null!=(t=a.payload.message)?t:null:"Failed to create tag",console.log("❌ Tag Slice: Create tag rejected",e.error)}),e.addCase(i.pending,(e,a)=>{let t=a.meta.arg;e.deleteLoading[t]=!0,e.error=null,console.log("⏳ Tag Slice: Delete tag pending",{tagId:t})}).addCase(i.fulfilled,(e,a)=>{let t=a.payload;delete e.deleteLoading[t],e.tags=e.tags.filter(e=>e.id!==t),e.error=null,console.log("✅ Tag Slice: Delete tag successful",{tagId:t})}).addCase(i.rejected,(e,a)=>{var t;let o=a.meta.arg;delete e.deleteLoading[o],e.error="object"==typeof a.payload&&a.payload&&"message"in a.payload?null!=(t=a.payload.message)?t:null:"Failed to delete tag",console.log("❌ Tag Slice: Delete tag rejected",e.error)})}}),{clearError:c,resetCreateLoading:g,resetDeleteLoading:u}=d.actions,p=d.reducer}}]);