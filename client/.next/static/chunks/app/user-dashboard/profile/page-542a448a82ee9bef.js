(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3911],{1357:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>P});var i=t(95155),s=t(12115),r=t(66766),n=t(86491),o=t(71007),l=t(5040),d=t(23861),c=t(32919),u=t(13717),m=t(75525),f=t(81497),g=t(78749),p=t(92657),x=t(34835),h=t(35695),b=t(28695),y=t(60760),v=t(62523),w=t(88539),j=t(53680),N=t(54287),A=t(63464);function P(){let e=(0,h.useRouter)(),a=(0,j.jL)(),{user:t,isLoading:P,error:k}=(0,j.h7)(),C=(0,j.GV)(e=>{var a;return(null==(a=e.notifications)?void 0:a.notifications)||[]}),_=(0,j.GV)(e=>{var a,t;return(null==(t=e.notifications)||null==(a=t.loading)?void 0:a.fetchNotifications)||!1}),S=(0,j.GV)(e=>{var a;return(null==(a=e.notifications)?void 0:a.unreadCount)||0}),[E,F]=(0,s.useState)("profile"),[L,B]=(0,s.useState)(!1),[D,H]=(0,s.useState)(!1),[R,U]=(0,s.useState)(!1),[T,q]=(0,s.useState)(!1),[G,I]=(0,s.useState)(!1),[Q,M]=(0,s.useState)({name:"",email:"",bio:"",avatar:null}),[V,Y]=(0,s.useState)(!1),[z,O]=(0,s.useState)({showProfile:!0,allowMessages:!0,emailNotifications:!1}),[X,Z]=(0,s.useState)({emailNotifications:!0,pushNotifications:!0,commentNotifications:!0}),[K,W]=(0,s.useState)({currentPassword:"",newPassword:"",confirmPassword:"",twoFactorEnabled:!1}),[J,$]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t||a((0,N.VM)())},[a,t]),(0,s.useEffect)(()=>{t&&(console.log("\uD83D\uDD04 Profile Page: Syncing form data with current user",{userId:t.id,userName:t.name,userBio:t.bio?t.bio.substring(0,50)+(t.bio.length>50?"...":""):"No bio"}),M({name:t.name||"",email:t.email||"",bio:t.bio||"",avatar:null}),Y(!1),console.log("✅ Profile Page: Form data synced with Redux user state"))},[t]),(0,s.useEffect)(()=>()=>{a((0,N.ET)())},[a]),(0,s.useEffect)(()=>{"notifications"===E&&a((0,A.bb)({page:1,per_page:10}))},[E,a]),(0,s.useEffect)(()=>{a((0,A.jA)())},[a]);let ee=e=>{let{name:a,value:t}=e.target;M(e=>({...e,[a]:t}))},ea=e=>{var a;let t=null==(a=e.target.files)?void 0:a[0];t&&M(e=>({...e,avatar:t}))},et=e=>{let{name:a,value:t}=e.target;W(e=>({...e,[a]:t}))},ei=async e=>{e.preventDefault();try{let e={};if(Q.name!==(null==t?void 0:t.name)&&(e.name=Q.name),Q.bio!==(null==t?void 0:t.bio)&&(e.bio=Q.bio),Q.avatar&&(e.avatar=Q.avatar),Object.keys(e).length>0){console.log("\uD83D\uDD04 Profile Page: Submitting profile update",e);let t=await a((0,N.eg)(e)).unwrap();console.log("✅ Profile Page: Profile update successful",t),await a((0,N.VM)()).unwrap(),console.log("✅ Profile Page: User profile refreshed after update"),H(!0),setTimeout(()=>H(!1),3e3),B(!1),M(e=>({...e,avatar:null})),console.log("✅ Profile Page: Form state reset after successful update")}else console.log("ℹ️ Profile Page: No changes detected, exiting edit mode"),B(!1)}catch(e){console.error("❌ Profile Page: Failed to update profile:",e)}},es=async e=>{if(e.preventDefault(),$(!1),K.newPassword!==K.confirmPassword){a((0,N.ET)()),setTimeout(()=>{console.error("Passwords don't match!")},100);return}if(K.newPassword.length<8){a((0,N.ET)()),setTimeout(()=>{console.error("Password must be at least 8 characters!")},100);return}try{console.log("\uD83D\uDD04 Profile Page: Submitting password update"),await a((0,N.ej)({current_password:K.currentPassword,password:K.newPassword,password_confirmation:K.confirmPassword})).unwrap(),console.log("✅ Profile Page: Password update successful"),$(!0),setTimeout(()=>$(!1),5e3),W({currentPassword:"",newPassword:"",confirmPassword:"",twoFactorEnabled:K.twoFactorEnabled}),console.log("✅ Profile Page: Password form cleared after successful update")}catch(e){console.error("❌ Profile Page: Failed to update password:",e)}},er=async()=>{try{console.log("\uD83D\uDEAA Profile Page: Starting logout process"),await a((0,N.y4)()).unwrap(),console.log("✅ Profile Page: Logout successful, redirecting to home"),e.push("/")}catch(a){console.error("❌ Profile Page: Logout failed",a),e.push("/")}},en=[{id:"profile",label:"Profile",icon:(0,i.jsx)(o.A,{className:"w-5 h-5"})},{id:"activity",label:"Activity",icon:(0,i.jsx)(l.A,{className:"w-5 h-5"})},{id:"notifications",label:"Notifications",icon:(0,i.jsx)(d.A,{className:"w-5 h-5"})},{id:"security",label:"Security",icon:(0,i.jsx)(c.A,{className:"w-5 h-5"})}];return P&&!t?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,i.jsx)("div",{className:"max-w-auto",children:(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-[#1d2b7d]"})})})}):t||P?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,i.jsxs)("div",{className:"max-w-auto",children:[(0,i.jsxs)(b.P.div,{className:"bg-white rounded-xl shadow-md overflow-hidden mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},whileHover:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[(0,i.jsx)("div",{className:"h-32 bg-gradient-to-r from-[#1d2b7d] to-[#2a3d99]"}),(0,i.jsxs)("div",{className:"px-6 py-4 md:px-8 md:py-6",children:[(0,i.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center",children:[(0,i.jsxs)(b.P.div,{className:"relative -mt-16 mb-4 md:mb-0 md:mr-6",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:200},children:[(0,i.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-white bg-white",children:(0,i.jsx)(r.default,{src:!V&&(null==t?void 0:t.avatar)?t.avatar:n.A,alt:(null==t?void 0:t.name)||"User",width:96,height:96,className:"object-cover w-full h-full",onError:()=>Y(!0)})}),(0,i.jsx)(b.P.button,{onClick:()=>B(!0),className:"absolute bottom-0 right-0 bg-[#1d2b7d] text-white p-1 rounded-full",whileHover:{scale:1.2},whileTap:{scale:.9},children:(0,i.jsx)(u.A,{className:"w-4 h-4"})})]}),(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,i.jsxs)(b.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:(null==t?void 0:t.name)||"User"}),(0,i.jsxs)("p",{className:"text-gray-500",children:["Joined ",(null==t?void 0:t.created_at)?new Date(t.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"}):"N/A"]})]}),(0,i.jsx)(b.P.div,{className:"mt-4 md:mt-0 flex space-x-3",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},children:(0,i.jsxs)(b.P.button,{onClick:()=>B(!0),className:"bg-[#1d2b7d] hover:bg-[#162058] text-white font-medium py-2 px-4 rounded-lg transition-colors duration-300 flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,i.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]})})]}),(0,i.jsx)(b.P.div,{className:"mt-6 border-t pt-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:(0,i.jsx)("p",{className:"text-black",children:(null==t?void 0:t.bio)||"No bio available"})})]})]}),(0,i.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,i.jsx)(b.P.div,{className:"md:w-1/4",initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.5},children:(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden sticky top-8",children:[en.map((e,a)=>(0,i.jsxs)(b.P.button,{onClick:()=>e.id&&F(e.id),className:"w-full flex items-center gap-3 p-4 text-left border-l-4 transition-all ".concat(E===e.id?"border-[#1d2b7d] bg-[#1d2b7d]/5 text-[#1d2b7d]":"border-transparent hover:bg-gray-50 text-gray-700"),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},whileHover:{x:5},children:[e.icon,(0,i.jsx)("span",{className:"font-medium",children:e.label})]},e.id)),(0,i.jsxs)(b.P.button,{onClick:er,className:"w-full flex items-center gap-3 p-4 text-left border-l-4 border-transparent hover:bg-gray-50 text-red-500",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},whileHover:{x:5},children:[(0,i.jsx)(x.A,{className:"w-5 h-5"}),(0,i.jsx)("span",{className:"font-medium",children:"Logout"})]})]})}),(0,i.jsx)(b.P.div,{className:"md:w-3/4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},children:(0,i.jsx)(y.N,{mode:"wait",children:(0,i.jsx)(b.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(()=>{switch(E){case"profile":function t(e,a){a(a=>({...a,[e]:!a[e]}))}return(0,i.jsxs)(b.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[D&&(0,i.jsxs)(b.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:[(0,i.jsx)("strong",{className:"font-bold",children:"Success!"}),(0,i.jsxs)("span",{className:"block sm:inline",children:[" ","Your profile has been updated."]})]}),k&&(0,i.jsxs)(b.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,i.jsx)("strong",{className:"font-bold",children:"Error!"}),(0,i.jsxs)("span",{className:"block sm:inline",children:[" ",k]}),(0,i.jsx)("button",{onClick:()=>a((0,N.ET)()),className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:"\xd7"})]}),(0,i.jsx)(b.P.div,{className:"bg-white rounded-xl shadow-md p-6",whileHover:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:(0,i.jsxs)("form",{onSubmit:ei,children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Personal Information"}),(0,i.jsxs)(b.P.button,{type:"button",onClick:()=>B(!L),className:"text-[#1d2b7d] hover:text-[#162058] font-medium flex items-center gap-1",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:P,children:[(0,i.jsx)(u.A,{className:"w-4 h-4"}),L?"Cancel":"Edit"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Full Name"}),(0,i.jsx)(v.p,{type:"text",name:"name",value:Q.name,onChange:ee,disabled:!L||P,className:"w-full px-4 py-2 border rounded-lg focus:border-[#1d2b7d] focus:outline-none text-black disabled:bg-gray-50 disabled:text-gray-500"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Email Address"}),(0,i.jsx)(v.p,{type:"email",name:"email",value:Q.email,onChange:ee,disabled:!0,className:"w-full px-4 py-2 border rounded-lg focus:border-[#1d2b7d] focus:outline-none text-black disabled:bg-gray-50 disabled:text-gray-500"})]}),L&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Profile Picture"}),(0,i.jsx)(v.p,{type:"file",accept:"image/*",onChange:ea,className:"w-full px-4 py-2 border rounded-lg focus:border-[#1d2b7d] focus:outline-none"})]})]}),(0,i.jsx)("div",{className:"space-y-4",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:"Bio"}),(0,i.jsx)(w.T,{name:"bio",rows:5,value:Q.bio,onChange:ee,disabled:!L||P,placeholder:"Tell us about yourself...",className:"w-full px-4 py-2 border rounded-lg focus:border-[#1d2b7d] focus:outline-none text-black disabled:bg-gray-50 disabled:text-gray-500"})]})})]}),L&&(0,i.jsx)(b.P.div,{className:"mt-6 flex justify-end",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,i.jsx)(b.P.button,{type:"submit",disabled:P,className:"bg-[#1d2b7d] hover:bg-[#162058] text-white font-medium py-2 px-6 rounded-lg transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:1.05},whileTap:{scale:.95},children:P?"Saving...":"Save Changes"})})]})}),(0,i.jsxs)(b.P.div,{className:"bg-white rounded-xl shadow-md p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},whileHover:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Community Preferences"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)(b.P.div,{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",whileHover:{backgroundColor:"rgba(0, 0, 0, 0.03)"},children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(m.A,{className:"w-5 h-5 text-[#1d2b7d] mr-3"}),(0,i.jsx)("span",{children:"Show my profile to other members"})]}),(0,i.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,i.jsx)(v.p,{type:"checkbox",className:"sr-only peer",checked:z.showProfile,onChange:()=>t("showProfile",O)}),(0,i.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#1d2b7d]"})]})]}),(0,i.jsxs)(b.P.div,{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",whileHover:{backgroundColor:"rgba(0, 0, 0, 0.03)"},children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(f.A,{className:"w-5 h-5 text-[#1d2b7d] mr-3"}),(0,i.jsx)("span",{children:"Allow direct messages"})]}),(0,i.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,i.jsx)(v.p,{type:"checkbox",className:"sr-only peer",checked:z.allowMessages,onChange:()=>t("allowMessages",O)}),(0,i.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#1d2b7d]"})]})]}),(0,i.jsxs)(b.P.div,{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",whileHover:{backgroundColor:"rgba(0, 0, 0, 0.03)"},children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(d.A,{className:"w-5 h-5 text-[#1d2b7d] mr-3"}),(0,i.jsx)("span",{children:"Email notifications for new messages"})]}),(0,i.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,i.jsx)(v.p,{type:"checkbox",className:"sr-only peer",checked:z.emailNotifications,onChange:()=>t("emailNotifications",O)}),(0,i.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#1d2b7d]"})]})]})]})]})]});case"activity":return(0,i.jsxs)(b.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[(0,i.jsxs)(b.P.div,{className:"bg-white rounded-xl shadow-md p-6",whileHover:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Activity Center"}),(0,i.jsxs)("div",{className:"p-8 text-center",children:[(0,i.jsx)(b.P.div,{className:"inline-flex items-center justify-center w-16 h-16 bg-[#1d2b7d]/10 rounded-full mb-4",initial:{scale:.8},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20,delay:.3},children:(0,i.jsx)(l.A,{className:"w-8 h-8 text-[#1d2b7d]"})}),(0,i.jsx)(b.P.h4,{className:"text-lg font-medium text-gray-800 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:"Activity Tracking Coming Soon"}),(0,i.jsx)(b.P.p,{className:"text-gray-600 max-w-md mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"We are working on a comprehensive activity tracking system to help you monitor your engagement with our educational community."})]})]}),(0,i.jsxs)(b.P.div,{className:"bg-white rounded-xl shadow-md p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},whileHover:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Future Features"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)(b.P.div,{className:"border border-dashed border-gray-300 rounded-lg p-4 text-center",whileHover:{scale:1.03,borderColor:"#1d2b7d"},transition:{type:"spring",stiffness:400,damping:10},children:[(0,i.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-[#1d2b7d]/10 rounded-full mb-3",children:(0,i.jsx)(f.A,{className:"w-6 h-6 text-[#1d2b7d]"})}),(0,i.jsx)("h4",{className:"font-medium text-gray-800 mb-1",children:"Post & Comment History"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Track all your contributions"})]}),(0,i.jsxs)(b.P.div,{className:"border border-dashed border-gray-300 rounded-lg p-4 text-center",whileHover:{scale:1.03,borderColor:"#1d2b7d"},transition:{type:"spring",stiffness:400,damping:10},children:[(0,i.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-[#1d2b7d]/10 rounded-full mb-3",children:(0,i.jsx)(m.A,{className:"w-6 h-6 text-[#1d2b7d]"})}),(0,i.jsx)("h4",{className:"font-medium text-gray-800 mb-1",children:"Achievement Badges"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Earn badges for your participation"})]})]})]})]});case"notifications":return(0,i.jsxs)(b.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[(0,i.jsxs)(b.P.div,{className:"bg-white rounded-xl shadow-md p-6",whileHover:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Notification Settings"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)(b.P.div,{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",whileHover:{backgroundColor:"rgba(0, 0, 0, 0.03)"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-800",children:"Email Notifications"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Receive email notifications for important updates"})]}),(0,i.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,i.jsx)(v.p,{type:"checkbox",className:"sr-only peer",checked:X.emailNotifications,onChange:()=>t("emailNotifications",Z)}),(0,i.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#1d2b7d]"})]})]}),(0,i.jsxs)(b.P.div,{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",whileHover:{backgroundColor:"rgba(0, 0, 0, 0.03)"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-800",children:"Push Notifications"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Receive push notifications on your device"})]}),(0,i.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,i.jsx)(v.p,{type:"checkbox",className:"sr-only peer",checked:X.pushNotifications,onChange:()=>t("pushNotifications",Z)}),(0,i.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#1d2b7d]"})]})]}),(0,i.jsxs)(b.P.div,{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",whileHover:{backgroundColor:"rgba(0, 0, 0, 0.03)"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-800",children:"Comment Notifications"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Get notified when someone comments on your posts"})]}),(0,i.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,i.jsx)(v.p,{type:"checkbox",className:"sr-only peer",checked:X.commentNotifications,onChange:()=>t("commentNotifications",Z)}),(0,i.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#1d2b7d]"})]})]})]})]}),(0,i.jsxs)(b.P.div,{className:"bg-white rounded-xl shadow-md p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},whileHover:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Recent Notifications"}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:[S," unread"]})]}),_?(0,i.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,i.jsx)("div",{className:"animate-pulse",children:(0,i.jsxs)("div",{className:"flex items-start p-3",children:[(0,i.jsx)("div",{className:"bg-gray-200 p-2 rounded-full mr-4 w-9 h-9"}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,i.jsx)("div",{className:"h-3 bg-gray-200 rounded w-3/4 mb-1"}),(0,i.jsx)("div",{className:"h-2 bg-gray-200 rounded w-1/4"})]})]})},e))}):C.length>0?(0,i.jsxs)("div",{className:"space-y-4",children:[C.slice(0,5).map((e,t)=>(0,i.jsxs)(b.P.div,{className:"flex items-start p-3 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer ".concat(e.is_read?"":"bg-blue-50 border-l-4 border-blue-500"),initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+.1*t},whileHover:{backgroundColor:"rgba(0, 0, 0, 0.03)"},onClick:()=>{e.is_read||a((0,A.Q1)({notification_ids:[e.id]}))},children:[(0,i.jsx)("div",{className:"bg-[#1d2b7d]/10 p-2 rounded-full mr-4",children:(0,i.jsx)(d.A,{className:"w-5 h-5 text-[#1d2b7d]"})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsx)("p",{className:"font-medium ".concat(e.is_read?"text-gray-800":"text-gray-900"),children:e.title||"Notification"}),!e.is_read&&(0,i.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full ml-2 mt-2"})]}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:e.message||"No message content"}),(0,i.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]})]},e.id)),C.length>5&&(0,i.jsx)(b.P.div,{className:"text-center pt-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:(0,i.jsx)("button",{onClick:()=>e.push("/user-dashboard/notifications"),className:"text-[#1d2b7d] hover:text-[#162058] font-medium text-sm",children:"View all notifications →"})})]}):(0,i.jsxs)(b.P.div,{className:"text-center py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[(0,i.jsx)("div",{className:"bg-gray-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,i.jsx)(d.A,{className:"w-8 h-8 text-gray-400"})}),(0,i.jsx)("p",{className:"text-gray-500 font-medium mb-2",children:"No notifications yet"}),(0,i.jsx)("p",{className:"text-gray-400 text-sm",children:"You'll see notifications here when you have new activity"})]})]})]});case"security":return(0,i.jsxs)(b.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[(0,i.jsxs)(b.P.div,{className:"bg-white rounded-xl shadow-md p-6",whileHover:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Password"}),J&&(0,i.jsxs)(b.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[(0,i.jsx)("strong",{className:"font-bold",children:"Success!"}),(0,i.jsxs)("span",{className:"block sm:inline",children:[" ","Your password has been updated successfully."]})]}),k&&(0,i.jsxs)(b.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[(0,i.jsx)("strong",{className:"font-bold",children:"Error!"}),(0,i.jsxs)("span",{className:"block sm:inline",children:[" ",Array.isArray(k)?k.join(", "):k]}),(0,i.jsx)("button",{onClick:()=>a((0,N.ET)()),className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:"\xd7"})]}),(0,i.jsxs)("form",{onSubmit:es,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Current Password"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(v.p,{type:R?"text":"password",name:"currentPassword",value:K.currentPassword,onChange:et,className:"w-full px-4 py-2 pr-10 border rounded-lg focus:border-[#1d2b7d] focus:outline-none",placeholder:"••••••••",required:!0}),(0,i.jsx)("button",{type:"button",onClick:()=>U(!R),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:R?(0,i.jsx)(g.A,{className:"w-4 h-4 text-gray-500 hover:text-gray-700"}):(0,i.jsx)(p.A,{className:"w-4 h-4 text-gray-500 hover:text-gray-700"})})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"New Password"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(v.p,{type:T?"text":"password",name:"newPassword",value:K.newPassword,onChange:et,className:"w-full px-4 py-2 pr-10 border rounded-lg focus:border-[#1d2b7d] focus:outline-none",placeholder:"••••••••",required:!0,minLength:8}),(0,i.jsx)("button",{type:"button",onClick:()=>q(!T),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:T?(0,i.jsx)(g.A,{className:"w-4 h-4 text-gray-500 hover:text-gray-700"}):(0,i.jsx)(p.A,{className:"w-4 h-4 text-gray-500 hover:text-gray-700"})})]}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Confirm New Password"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(v.p,{type:G?"text":"password",name:"confirmPassword",value:K.confirmPassword,onChange:et,className:"w-full px-4 py-2 pr-10 border rounded-lg focus:border-[#1d2b7d] focus:outline-none",placeholder:"••••••••",required:!0}),(0,i.jsx)("button",{type:"button",onClick:()=>I(!G),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:G?(0,i.jsx)(g.A,{className:"w-4 h-4 text-gray-500 hover:text-gray-700"}):(0,i.jsx)(p.A,{className:"w-4 h-4 text-gray-500 hover:text-gray-700"})})]})]}),(0,i.jsx)(b.P.div,{className:"mt-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,i.jsx)(b.P.button,{type:"submit",disabled:P,className:"bg-[#1d2b7d] hover:bg-[#162058] text-white font-medium py-2 px-6 rounded-lg transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:P?1:1.05},whileTap:{scale:P?1:.95},children:P?"Updating...":"Update Password"})})]})]}),(0,i.jsxs)(b.P.div,{className:"bg-white rounded-xl shadow-md p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},whileHover:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Two-Factor Authentication"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"Add an extra layer of security to your account by enabling two-factor authentication."}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"font-medium",children:"Enable 2FA"}),(0,i.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,i.jsx)(v.p,{type:"checkbox",className:"sr-only peer",checked:K.twoFactorEnabled,onChange:()=>W(e=>({...e,twoFactorEnabled:!e.twoFactorEnabled}))}),(0,i.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#1d2b7d]"})]})]}),(0,i.jsx)(y.N,{children:K.twoFactorEnabled&&(0,i.jsx)(b.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 p-4 bg-gray-50 rounded-lg",children:(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Two-factor authentication is enabled. You will receive a verification code via email when signing in."})})})]}),(0,i.jsxs)(b.P.div,{className:"bg-white rounded-xl shadow-md p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},whileHover:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Account Actions"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)(b.P.button,{onClick:()=>alert("You've been logged out from all devices."),className:"w-full flex items-center justify-between p-3 text-left hover:bg-gray-50 rounded-lg transition-colors border",whileHover:{backgroundColor:"rgba(0, 0, 0, 0.03)",x:5},whileTap:{scale:.98},children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(x.A,{className:"w-5 h-5 text-gray-500 mr-3"}),(0,i.jsx)("span",{children:"Log out from all devices"})]}),(0,i.jsx)("span",{className:"text-gray-400",children:"→"})]}),(0,i.jsxs)(b.P.button,{onClick:()=>{confirm("Are you sure you want to deactivate your account? This action cannot be undone.")&&(alert("Your account has been deactivated."),e.push("/"))},className:"w-full flex items-center justify-between p-3 text-left hover:bg-red-50 rounded-lg transition-colors border border-red-100",whileHover:{backgroundColor:"rgba(254, 226, 226, 0.5)",x:5},whileTap:{scale:.98},children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(m.A,{className:"w-5 h-5 text-red-500 mr-3"}),(0,i.jsx)("span",{className:"text-red-500",children:"Deactivate account"})]}),(0,i.jsx)("span",{className:"text-red-400",children:"→"})]})]})]})]})}})()},E)})})]})]})}):(e.push("/"),null)}},5513:(e,a,t)=>{"use strict";t.d(a,{PU:()=>n});var i=t(12115),s=t(53680),r=t(16860);let n=()=>{let e=(0,s.jL)(),a=(0,s.GV)(r.a7),t=(0,s.GV)(r.YQ),n=(0,s.GV)(r.H1),o=(0,s.GV)(r.cr),l=(0,s.GV)(r.IQ),d=(0,s.GV)(r.p8),c=(0,s.GV)(r.S6),u=(0,s.GV)(r.fn),m=(0,i.useCallback)(a=>e((0,r.Os)(a||{})),[e]),f=(0,i.useCallback)(a=>e((0,r._z)(a)),[e]),g=(0,i.useCallback)(a=>e((0,r.Xo)(a||{})),[e]),p=(0,i.useCallback)(a=>{e((0,r.LE)(a))},[e]),x=(0,i.useCallback)(()=>{e((0,r.VO)())},[e]),h=(0,i.useCallback)(()=>{e((0,r.ET)())},[e]),b=(0,i.useCallback)((a,t)=>{e((0,r.lg)({messageId:a,status:t}))},[e]);return{messages:a,pagination:t,filters:n,loading:o.fetchUserMessages,sendLoading:o.sendMessage,error:l,unreadMessages:d,respondedMessages:c,hasMore:u,fetchMessages:m,sendNewMessage:f,loadMore:g,setFilters:p,clearMessages:x,clearErrorState:h,updateStatus:b}}},50293:(e,a,t)=>{Promise.resolve().then(t.bind(t,1357))},53680:(e,a,t)=>{"use strict";t.d(a,{kp:()=>r.kp,rq:()=>o.rq,Qx:()=>r.Qx,jL:()=>u,GV:()=>m,h7:()=>f,_9:()=>l,bP:()=>n,E$:()=>c,a4:()=>d,j6:()=>g});var i=t(34540),s=t(12115);t(41480);var r=t(12840);t(5513);let n=()=>{var e,a,t,i;let s=m(e=>e.faqs)||{faqs:[],adminFaqs:[],pagination:null,filters:{page:1,per_page:15},loading:{fetchFaqs:!1,createFaq:!1,updateFaq:!1,deleteFaq:!1},error:null};return{faqs:s.faqs||[],adminFaqs:s.adminFaqs||[],pagination:s.pagination,filters:s.filters,loading:s.loading,isLoading:(null==(e=s.loading)?void 0:e.fetchFaqs)||!1,isCreating:(null==(a=s.loading)?void 0:a.createFaq)||!1,isUpdating:(null==(t=s.loading)?void 0:t.updateFaq)||!1,isDeleting:(null==(i=s.loading)?void 0:i.deleteFaq)||!1,error:s.error,hasFaqs:(s.faqs||[]).length>0,hasAdminFaqs:(s.adminFaqs||[]).length>0,isAnyLoading:!!s.loading&&Object.values(s.loading).some(e=>e),getFaqById:e=>(s.faqs||[]).find(a=>a.id===e),getAdminFaqById:e=>(s.adminFaqs||[]).find(a=>a.id===e)}};var o=t(28052);let l=()=>{let e=m(e=>e.comments);return{commentsByPost:(null==e?void 0:e.commentsByPost)||{},paginationByPost:(null==e?void 0:e.paginationByPost)||{},userComments:(null==e?void 0:e.userComments)||[],userCommentsPagination:(null==e?void 0:e.userCommentsPagination)||null,isLoading:(null==e?void 0:e.isLoading)||!1,isCreating:(null==e?void 0:e.isCreating)||!1,isUpdating:(null==e?void 0:e.isUpdating)||!1,isDeleting:(null==e?void 0:e.isDeleting)||!1,error:(null==e?void 0:e.error)||null}},d=e=>{let a=m(e=>e.comments);return{comments:(null==a?void 0:a.commentsByPost[e])||[],pagination:(null==a?void 0:a.paginationByPost[e])||null,isLoading:(null==a?void 0:a.isLoading)||!1,error:(null==a?void 0:a.error)||null}},c=()=>{var e,a,t,i,s,r;let n=m(e=>e.notifications)||{notifications:[],unreadCount:0,pagination:null,filters:{page:1,per_page:15},loading:{fetchNotifications:!1,markAsRead:!1,getUnreadCount:!1},error:null};return{notifications:n.notifications||[],unreadCount:n.unreadCount||0,pagination:n.pagination,filters:n.filters,loading:n.loading,isLoading:(null==(e=n.loading)?void 0:e.fetchNotifications)||!1,isMarkingAsRead:(null==(a=n.loading)?void 0:a.markAsRead)||!1,isFetchingUnreadCount:(null==(t=n.loading)?void 0:t.getUnreadCount)||!1,error:n.error,hasNotifications:(n.notifications||[]).length>0,hasUnreadNotifications:(n.unreadCount||0)>0,isAnyLoading:!!n.loading&&Object.values(n.loading).some(e=>e),unreadNotifications:(n.notifications||[]).filter(e=>!e.is_read),readNotifications:(n.notifications||[]).filter(e=>e.is_read),getNotificationsByType:e=>(n.notifications||[]).filter(a=>a.type===e),getNotificationById:e=>(n.notifications||[]).find(a=>a.id===e),hasMorePages:!!n.pagination&&n.pagination.current_page<n.pagination.last_page,currentPage:(null==(i=n.pagination)?void 0:i.current_page)||1,totalPages:(null==(s=n.pagination)?void 0:s.last_page)||1,totalNotifications:(null==(r=n.pagination)?void 0:r.total)||0}},u=()=>(0,i.wA)(),m=i.d4,f=()=>{var e;let a=m(e=>e.auth);return(0,s.useEffect)(()=>{var e,t;console.log("\uD83D\uDD0D useAuth Hook: Auth state changed",{hasUser:!!(null==a?void 0:a.user),userId:null==a||null==(e=a.user)?void 0:e.id,userName:null==a||null==(t=a.user)?void 0:t.name,isAuthenticated:null==a?void 0:a.isAuthenticated,isLoading:null==a?void 0:a.isLoading,hasError:!!(null==a?void 0:a.error)})},[null==a?void 0:a.user,null==a?void 0:a.isAuthenticated,null==a?void 0:a.isLoading,null==a?void 0:a.error]),{user:(null==a?void 0:a.user)||null,token:(null==a?void 0:a.token)||null,isAuthenticated:(null==a?void 0:a.isAuthenticated)||!1,isLoading:(null==a?void 0:a.isLoading)||!1,error:null!=(e=null==a?void 0:a.error)?e:null}},g=()=>{let e=m(e=>e.posts);return{publicPosts:(null==e?void 0:e.publicPosts)||[],publicPostsPagination:(null==e?void 0:e.publicPostsPagination)||null,userPosts:(null==e?void 0:e.userPosts)||[],userPostsPagination:(null==e?void 0:e.userPostsPagination)||null,userPostsByStatus:(null==e?void 0:e.userPostsByStatus)||{pending:[],approved:[],rejected:[]},userPostsByStatusPagination:(null==e?void 0:e.userPostsByStatusPagination)||{pending:null,approved:null,rejected:null},currentPost:(null==e?void 0:e.currentPost)||null,filters:(null==e?void 0:e.filters)||{},isLoading:(null==e?void 0:e.isLoading)||!1,isCreating:(null==e?void 0:e.isCreating)||!1,isUpdating:(null==e?void 0:e.isUpdating)||!1,isDeleting:(null==e?void 0:e.isDeleting)||!1,isLoadingByStatus:(null==e?void 0:e.isLoadingByStatus)||{pending:!1,approved:!1,rejected:!1},error:(null==e?void 0:e.error)||null}}},59434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>r});var i=t(52596),s=t(39688);function r(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,i.$)(a))}},62523:(e,a,t)=>{"use strict";t.d(a,{p:()=>n});var i=t(95155),s=t(12115),r=t(59434);let n=s.forwardRef((e,a)=>{let{className:t,type:s,...n}=e;return(0,i.jsx)("input",{type:s,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...n})});n.displayName="Input"},63464:(e,a,t)=>{"use strict";t.d(a,{SP:()=>y,Ay:()=>N,bb:()=>u,jA:()=>f,G:()=>x,X0:()=>g,Q1:()=>m,OA:()=>p,_F:()=>b});var i=t(66439);let s={notifications:[],unreadCount:0,pagination:null,filters:{page:1,per_page:15},loading:{fetchNotifications:!1,markAsRead:!1,getUnreadCount:!1},error:null};var r=t(13984);let n=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let a=new URLSearchParams;e.page&&a.append("page",e.page.toString()),e.per_page&&a.append("per_page",e.per_page.toString()),void 0!==e.is_read&&a.append("is_read",e.is_read?"true":"false"),e.type&&a.append("type",e.type),e.sort&&a.append("sort",e.sort);let t=a.toString();return(await r.Ay.get("/notifications".concat(t?"?".concat(t):""))).data}catch(e){var a,t,i,s;throw console.error("Get notifications error:",e),{success:!1,message:(null==e||null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"Failed to fetch notifications",errors:null==e||null==(s=e.response)||null==(i=s.data)?void 0:i.errors}}},o=async e=>{try{return(await r.Ay.post("/notifications/read",e)).data}catch(e){var a,t,i,s;throw console.error("Mark notifications as read error:",e),{success:!1,message:(null==e||null==(t=e.response)||null==(a=t.data)?void 0:a.message)||"Failed to mark notifications as read",errors:null==e||null==(s=e.response)||null==(i=s.data)?void 0:i.errors}}},l=async()=>{try{return{unread_count:(await n({page:1,per_page:1,is_read:!1})).meta.unread_count}}catch(s){var e,a,t,i;throw console.error("Get unread count error:",s),{success:!1,message:(null==s||null==(a=s.response)||null==(e=a.data)?void 0:e.message)||"Failed to get unread count",errors:null==s||null==(i=s.response)||null==(t=i.data)?void 0:t.errors}}},d=async()=>{try{return await o({mark_all:!0})}catch(e){throw console.error("Mark all notifications as read error:",e),e}},c=async e=>{try{return await o({notification_ids:e})}catch(e){throw console.error("Mark specific notifications as read error:",e),e}},u=(0,i.zD)("notifications/fetchNotifications",async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{rejectWithValue:a}=arguments.length>1?arguments[1]:void 0;try{return await n(e)}catch(e){return a((null==e?void 0:e.message)||"Failed to fetch notifications")}}),m=(0,i.zD)("notifications/markAsRead",async(e,a)=>{let{rejectWithValue:t}=a;try{return{...await o(e),payload:e}}catch(e){return t((null==e?void 0:e.message)||"Failed to mark notifications as read")}}),f=(0,i.zD)("notifications/fetchUnreadCount",async(e,a)=>{let{rejectWithValue:t}=a;try{return await l()}catch(e){return t((null==e?void 0:e.message)||"Failed to fetch unread count")}}),g=(0,i.zD)("notifications/markAllAsRead",async(e,a)=>{let{rejectWithValue:t}=a;try{return await d()}catch(e){return t((null==e?void 0:e.message)||"Failed to mark all notifications as read")}}),p=(0,i.zD)("notifications/markSpecificAsRead",async(e,a)=>{let{rejectWithValue:t}=a;try{return{...await c(e),notificationIds:e}}catch(e){return t((null==e?void 0:e.message)||"Failed to mark specific notifications as read")}}),x=(0,i.zD)("notifications/loadMore",async(e,a)=>{let{rejectWithValue:t,getState:i}=a;try{var s;let a=(null==(s=i().notifications.pagination)?void 0:s.current_page)||1;return await n({...e,page:a+1})}catch(e){return t((null==e?void 0:e.message)||"Failed to load more notifications")}}),h=(0,i.Z0)({name:"notifications",initialState:s,reducers:{setFilters:(e,a)=>{e.filters={...e.filters,...a.payload},(void 0!==a.payload.is_read||void 0!==a.payload.type)&&(e.filters.page=1)},clearNotifications:e=>{e.notifications=[],e.pagination=null,e.error=null},clearError:e=>{e.error=null},resetState:()=>s,updateLocalReadStatus:(e,a)=>{let{notification_ids:t,is_read:i}=a.payload;if(e.notifications)if(e.notifications=e.notifications.map(e=>t.includes(e.id)?{...e,is_read:i}:e),i){let a=t.filter(a=>e.notifications.find(e=>e.id===a&&!e.is_read)).length;e.unreadCount=Math.max(0,e.unreadCount-a)}else{let a=t.filter(a=>e.notifications.find(e=>e.id===a&&e.is_read)).length;e.unreadCount+=a}}},extraReducers:e=>{e.addCase(u.pending,e=>{e.loading.fetchNotifications=!0,e.error=null}).addCase(u.fulfilled,(e,a)=>{e.loading.fetchNotifications=!1,e.notifications=a.payload.data,e.pagination=a.payload.meta.pagination,e.unreadCount=a.payload.meta.unread_count}).addCase(u.rejected,(e,a)=>{e.loading.fetchNotifications=!1,e.error=a.payload}),e.addCase(x.pending,e=>{e.loading.fetchNotifications=!0,e.error=null}).addCase(x.fulfilled,(e,a)=>{e.loading.fetchNotifications=!1,e.notifications=[...e.notifications||[],...a.payload.data],e.pagination=a.payload.meta.pagination,e.unreadCount=a.payload.meta.unread_count}).addCase(x.rejected,(e,a)=>{e.loading.fetchNotifications=!1,e.error=a.payload}),e.addCase(m.pending,e=>{e.loading.markAsRead=!0,e.error=null}).addCase(m.fulfilled,(e,a)=>{if(e.loading.markAsRead=!1,e.unreadCount=a.payload.data.unread_count,e.notifications){let{payload:t}=a.payload;t.mark_all?e.notifications=e.notifications.map(e=>({...e,is_read:!0})):t.notification_ids&&(e.notifications=e.notifications.map(e=>t.notification_ids.includes(e.id)?{...e,is_read:!0}:e))}}).addCase(m.rejected,(e,a)=>{e.loading.markAsRead=!1,e.error=a.payload}),e.addCase(f.pending,e=>{e.loading.getUnreadCount=!0}).addCase(f.fulfilled,(e,a)=>{e.loading.getUnreadCount=!1,e.unreadCount=a.payload.unread_count}).addCase(f.rejected,(e,a)=>{e.loading.getUnreadCount=!1,e.error=a.payload}),e.addCase(g.pending,e=>{e.loading.markAsRead=!0,e.error=null}).addCase(g.fulfilled,(e,a)=>{e.loading.markAsRead=!1,e.unreadCount=a.payload.data.unread_count,e.notifications&&(e.notifications=e.notifications.map(e=>({...e,is_read:!0})))}).addCase(g.rejected,(e,a)=>{e.loading.markAsRead=!1,e.error=a.payload}),e.addCase(p.pending,e=>{e.loading.markAsRead=!0,e.error=null}).addCase(p.fulfilled,(e,a)=>{e.loading.markAsRead=!1,e.unreadCount=a.payload.data.unread_count,e.notifications&&(e.notifications=e.notifications.map(e=>a.payload.notificationIds.includes(e.id)?{...e,is_read:!0}:e))}).addCase(p.rejected,(e,a)=>{e.loading.markAsRead=!1,e.error=a.payload})}}),{setFilters:b,clearNotifications:y,clearError:v,resetState:w,updateLocalReadStatus:j}=h.actions,N=h.reducer},86491:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});let i={src:"/_next/static/media/user.3dba856b.jpg",height:1024,width:1024,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAAmgX/xAAcEAADAAEFAAAAAAAAAAAAAAABAgMEABESE0H/2gAIAQEAAT8ArGC4WPRS3c5bkPNgdf/EABgRAAIDAAAAAAAAAAAAAAAAAAABAiGB/9oACAECAQE/AIqtZ//EABgRAAIDAAAAAAAAAAAAAAAAAAABAjGB/9oACAEDAQE/AJXiP//Z",blurWidth:8,blurHeight:8}},88539:(e,a,t)=>{"use strict";t.d(a,{T:()=>n});var i=t(95155),s=t(12115),r=t(59434);let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,i.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...s})});n.displayName="Textarea"}},e=>{var a=a=>e(e.s=a);e.O(0,[7598,3863,6766,8695,8609,8185,4287,8441,1684,7358],()=>a(50293)),_N_E=e.O()}]);