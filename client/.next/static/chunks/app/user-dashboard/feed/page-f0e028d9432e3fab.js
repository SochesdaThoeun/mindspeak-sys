(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4278],{5623:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(19946).A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},12486:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(19946).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},15448:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(19946).A)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]])},22436:(e,s,a)=>{"use strict";var r=a(12115),t="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},l=r.useState,i=r.useEffect,n=r.useLayoutEffect,d=r.useDebugValue;function c(e){var s=e.getSnapshot;e=e.value;try{var a=s();return!t(e,a)}catch(e){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,s){return s()}:function(e,s){var a=s(),r=l({inst:{value:a,getSnapshot:s}}),t=r[0].inst,o=r[1];return n(function(){t.value=a,t.getSnapshot=s,c(t)&&o({inst:t})},[e,a,s]),i(function(){return c(t)&&o({inst:t}),e(function(){c(t)&&o({inst:t})})},[e]),d(a),a};s.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:o},27213:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(19946).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},35695:(e,s,a)=>{"use strict";var r=a(18999);a.o(r,"useParams")&&a.d(s,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(s,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}})},38164:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(19946).A)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},40968:(e,s,a)=>{"use strict";a.d(s,{b:()=>n});var r=a(12115),t=a(63655),l=a(95155),i=r.forwardRef((e,s)=>(0,l.jsx)(t.sG.label,{...e,ref:s,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var n=i},49033:(e,s,a)=>{"use strict";e.exports=a(22436)},51976:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(19946).A)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},54011:(e,s,a)=>{"use strict";a.d(s,{H4:()=>N,_V:()=>b,bL:()=>k});var r=a(12115),t=a(46081),l=a(39033),i=a(52712),n=a(63655),d=a(49033);function c(){return()=>{}}var o=a(95155),x="Avatar",[u,h]=(0,t.A)(x),[m,g]=u(x),p=r.forwardRef((e,s)=>{let{__scopeAvatar:a,...t}=e,[l,i]=r.useState("idle");return(0,o.jsx)(m,{scope:a,imageLoadingStatus:l,onImageLoadingStatusChange:i,children:(0,o.jsx)(n.sG.span,{...t,ref:s})})});p.displayName=x;var f="AvatarImage",y=r.forwardRef((e,s)=>{let{__scopeAvatar:a,src:t,onLoadingStatusChange:x=()=>{},...u}=e,h=g(f,a),m=function(e,s){let{referrerPolicy:a,crossOrigin:t}=s,l=(0,d.useSyncExternalStore)(c,()=>!0,()=>!1),n=r.useRef(null),o=l?(n.current||(n.current=new window.Image),n.current):null,[x,u]=r.useState(()=>j(o,e));return(0,i.N)(()=>{u(j(o,e))},[o,e]),(0,i.N)(()=>{let e=e=>()=>{u(e)};if(!o)return;let s=e("loaded"),r=e("error");return o.addEventListener("load",s),o.addEventListener("error",r),a&&(o.referrerPolicy=a),"string"==typeof t&&(o.crossOrigin=t),()=>{o.removeEventListener("load",s),o.removeEventListener("error",r)}},[o,t,a]),x}(t,u),p=(0,l.c)(e=>{x(e),h.onImageLoadingStatusChange(e)});return(0,i.N)(()=>{"idle"!==m&&p(m)},[m,p]),"loaded"===m?(0,o.jsx)(n.sG.img,{...u,ref:s,src:t}):null});y.displayName=f;var A="AvatarFallback",v=r.forwardRef((e,s)=>{let{__scopeAvatar:a,delayMs:t,...l}=e,i=g(A,a),[d,c]=r.useState(void 0===t);return r.useEffect(()=>{if(void 0!==t){let e=window.setTimeout(()=>c(!0),t);return()=>window.clearTimeout(e)}},[t]),d&&"loaded"!==i.imageLoadingStatus?(0,o.jsx)(n.sG.span,{...l,ref:s}):null});function j(e,s){return e?s?(e.src!==s&&(e.src=s),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}v.displayName=A;var k=p,b=y,N=v},54416:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},62108:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(19946).A)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]])},62523:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var r=a(95155),t=a(12115),l=a(59434);let i=t.forwardRef((e,s)=>{let{className:a,type:t,...i}=e;return(0,r.jsx)("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...i})});i.displayName="Input"},62525:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},63430:(e,s,a)=>{"use strict";a.d(s,{default:()=>P});var r=a(95155),t=a(12115),l=a(66695),i=a(91394),n=a(30285),d=a(62525),c=a(54416),o=a(27213),x=a(38164),u=a(19946);let h=(0,u.A)("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);var m=a(15448);let g=(0,u.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var p=a(12486),f=a(5623),y=a(51976),A=a(71366),v=a(66516),j=a(62108),k=a(44838),b=a(59434),N=a(66766),w=a(88539),C=a(62523),_=a(85057),L=a(35695),R=a(86491),E=a(97953),S=a(53680),M=a(12840);let z=["happy","excited","grateful","relaxed","loved","accomplished","productive","motivated","inspired","curious","thoughtful","calm","blessed","thankful","hopeful","proud","content","amused","optimistic","energetic"];function P(){let e=(0,S.jL)(),s=(0,L.useRouter)(),{publicPosts:a,isLoading:u,error:P}=(0,S.j6)(),{}=(0,S._9)(),[D,I]=(0,t.useState)(1),[B,F]=(0,t.useState)(!0),[Q,T]=(0,t.useState)(!1),U=(0,t.useRef)(null),[H,G]=(0,t.useState)([]),[W,$]=(0,t.useState)(""),[V,Z]=(0,t.useState)(""),[q,J]=(0,t.useState)(""),[O,K]=(0,t.useState)(""),[Y,X]=(0,t.useState)(null),[ee,es]=(0,t.useState)(""),[ea,er]=(0,t.useState)(!1),[et,el]=(0,t.useState)([]),[ei,en]=(0,t.useState)(""),[ed,ec]=(0,t.useState)(!1),[eo,ex]=(0,t.useState)(null),[eu,eh]=(0,t.useState)(null),[em,eg]=(0,t.useState)(null),[ep,ef]=(0,t.useState)(null),[ey]=(0,t.useState)({}),eA=(0,t.useRef)(null);(0,t.useEffect)(()=>{I(1),G([]),F(!0),e((0,M.dc)({page:1})).unwrap().then(e=>{let s=e.data||[];console.log("\uD83D\uDCE5 Initial posts loaded:",{count:s.length,samplePost:s[0]?{id:s[0].id,like_count:s[0].like_count,is_liked_by_user:s[0].is_liked_by_user,hasIsLikedProperty:"is_liked_by_user"in s[0]}:null}),G(s),s.length<10&&F(!1)}).catch(e=>{console.error("Failed to load initial posts:",e)})},[e]),(0,t.useEffect)(()=>{1===D&&Array.isArray(a)&&G(a)},[a,D]);let ev=(0,t.useCallback)(s=>{u||Q||(U.current&&U.current.disconnect(),U.current=new IntersectionObserver(s=>{s[0].isIntersecting&&B&&!Q&&(async()=>{if(u||Q||!B)return;T(!0);let s=D+1;try{let a=(await e((0,M.dc)({page:s})).unwrap()).data||[];G(e=>[...e,...a]),(0===a.length||a.length<10)&&F(!1),I(s)}catch(e){console.error("Error loading more posts:",e),ef("Failed to load more posts. Please try again."),setTimeout(()=>ef(null),3e3)}finally{T(!1)}})()},{threshold:.5}),s&&U.current.observe(s))},[u,Q,B,D,e]);(0,t.useEffect)(()=>{(eo||eu)&&(ex(null),eh(null))},[W,V,Y,O,et,eo,eu]);let ej=()=>{X(null),es(""),eA.current&&(eA.current.value="")},ek=()=>{ei.trim()&&!et.includes(ei.trim())&&(el([...et,ei.trim()]),en(""))},eb=e=>{el(et.filter(s=>s!==e))},eN=async()=>{if(!V.trim()&&!ee&&!O)return void ex("Please add some content, an image, or a link to create a post.");er(!0),ex(null),eh(null),eg(null);try{let s={title:W.trim()||"Untitled Post",content:V,emotion:q||void 0,link:O||void 0,is_anonymous:!0,tags:et,...Y&&{image:Y}};await e((0,M.pD)(s)).unwrap(),$(""),Z(""),J(""),K(""),el([]),en(""),ec(!1),ej(),eg("Post created successfully!"),setTimeout(()=>eg(null),5e3);let a=(await e((0,M.dc)({page:1})).unwrap()).data||[];G(a),I(1)}catch(e){if(console.error("Failed to create post:",e),(null==e?void 0:e.errors)&&"object"==typeof e.errors&&Object.keys(e.errors).length>0){eh(e.errors);let s=Object.keys(e.errors);ex("Please fix the following issues: ".concat(s.join(", ")))}else(null==e?void 0:e.message)?ex(e.message):"string"==typeof e?ex(e):ex("Failed to create post. Please try again."),eh(null)}finally{er(!1)}},ew=async s=>{ef(null);let a=H.find(e=>e.id===s);if(!a)return void console.error("❌ Post not found in allPosts:",s);let r=a.is_liked_by_user||!1,t=r?a.like_count-1:a.like_count+1;G(e=>e.map(e=>e.id===s?{...e,is_liked_by_user:!r,like_count:t}:e));try{r?await e((0,M.Rn)(s)).unwrap():await e((0,M.kL)(s)).unwrap(),e((0,M.dc)({page:D}))}catch(e){console.error("❌ Failed to toggle like:",e),G(e=>e.map(e=>e.id===s?{...e,is_liked_by_user:r,like_count:a.like_count}:e)),ef("Failed to toggle like. Please try again."),setTimeout(()=>ef(null),3e3)}},eC=()=>{console.log("Bookmark functionality not yet implemented")},e_=e=>{let s="".concat(window.location.origin,"/user-dashboard/feed/").concat(e);navigator.share?navigator.share({title:"Check out this post",text:"Interesting post from our social feed",url:s}).catch(console.error):navigator.clipboard.writeText(s).then(()=>{alert("Link copied to clipboard!")}).catch(()=>{alert("Failed to copy link")})},eL=e=>{let s="".concat(window.location.origin,"/user-dashboard/feed/").concat(e);navigator.clipboard.writeText(s).then(()=>{alert("Link copied to clipboard!")}).catch(()=>{alert("Failed to copy link")})},eR=e=>{let s=new Date(e),a=Math.floor((new Date().getTime()-s.getTime())/6e4);return a<1?"Just now":a<60?"".concat(a,"m ago"):a<1440?"".concat(Math.floor(a/60),"h ago"):"".concat(Math.floor(a/1440),"d ago")},eE=e=>{s.push("/user-dashboard/feed/".concat(e))},eS=H.length>0?H:Array.isArray(a)?a:[];return(0,r.jsxs)("div",{className:"space-y-4",children:[P&&(0,r.jsx)(l.Zp,{className:"border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800",children:(0,r.jsx)(l.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200 mb-1",children:"Error loading posts"}),(0,r.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:P})]}),(0,r.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>e((0,M.dc)()),className:"flex-shrink-0 border-red-300 text-red-700 hover:bg-red-100 dark:border-red-600 dark:text-red-300 dark:hover:bg-red-900/30",children:"Try Again"})]})})}),ep&&(0,r.jsx)(l.Zp,{className:"border-orange-200 bg-orange-50 dark:bg-orange-900/20 dark:border-orange-800 sticky top-0 z-10",children:(0,r.jsx)(l.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-orange-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.485 3.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 3.495zM10 6a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 6zm0 9a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:ep})}),(0,r.jsxs)("button",{onClick:()=>ef(null),className:"flex-shrink-0 text-orange-400 hover:text-orange-600 dark:hover:text-orange-300",children:[(0,r.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,r.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})})}),(eo||eu)&&(0,r.jsx)(l.Zp,{className:"border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800",children:(0,r.jsx)(l.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[eo&&(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200 mb-2",children:eo}),eu&&(0,r.jsx)("div",{className:"space-y-2 mt-2",children:Object.entries(eu).map(e=>{let[s,a]=e;return(0,r.jsxs)("div",{className:"bg-red-100 dark:bg-red-900/30 p-3 rounded-md",children:[(0,r.jsxs)("p",{className:"text-sm font-semibold text-red-800 dark:text-red-200 capitalize mb-1",children:[s," ","title"===s||"content"===s?"Issue":"Error",":"]}),(0,r.jsx)("ul",{className:"space-y-1",children:a.map((e,s)=>(0,r.jsxs)("li",{className:"text-sm text-red-700 dark:text-red-300 flex items-start",children:[(0,r.jsx)("span",{className:"mr-2",children:"•"}),(0,r.jsx)("span",{children:e})]},s))})]},s)})})]}),(0,r.jsxs)("button",{onClick:()=>{ex(null),eh(null)},className:"flex-shrink-0 text-red-400 hover:text-red-600 dark:hover:text-red-300",children:[(0,r.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,r.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})})}),em&&(0,r.jsx)(l.Zp,{className:"border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-800 sticky top-0 z-10",children:(0,r.jsx)(l.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("p",{className:"text-sm text-green-700 dark:text-green-300",children:[em," Your post has been shared with the community."]})}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>s.push("/user-dashboard/my-posts"),className:"flex-shrink-0 border-green-300 text-green-700 hover:bg-green-100 dark:border-green-600 dark:text-green-300 dark:hover:bg-green-900/30",children:"View My Posts"}),(0,r.jsxs)("button",{onClick:()=>eg(null),className:"flex-shrink-0 text-green-400 hover:text-green-600 dark:hover:text-green-300",children:[(0,r.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,r.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})]})})}),(0,r.jsx)(l.Zp,{className:"shadow-sm border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 overflow-hidden",children:(0,r.jsxs)(l.Wu,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsxs)(i.eu,{className:"h-10 w-10",children:[(0,r.jsx)(i.BK,{src:R.A.src,alt:"User"}),(0,r.jsx)(i.q5,{children:"U"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(C.p,{placeholder:"Give your post a title...",className:"w-full border-0 focus-visible:ring-0 text-lg font-medium bg-transparent mb-2",value:W,onChange:e=>$(e.target.value)}),(0,r.jsx)(w.T,{placeholder:"What's on your mind?",className:"w-full border-0 focus-visible:ring-0 resize-none p-0 text-base bg-transparent",value:V,onChange:e=>Z(e.target.value)}),ee&&(0,r.jsxs)("div",{className:"relative mt-2 w-full max-w-xs",children:[(0,r.jsx)(N.default,{src:ee||"/placeholder.svg",alt:"Preview",width:200,height:150,className:"rounded-md object-cover"}),(0,r.jsx)(n.$,{variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:ej,children:(0,r.jsx)(d.A,{className:"h-3 w-3"})})]}),O&&(0,r.jsxs)("div",{className:"mt-3 space-y-2 animate-slideDown",children:[(0,r.jsx)(_.J,{htmlFor:"link-input",children:"Add a link"}),(0,r.jsx)(C.p,{id:"link-input",placeholder:"https://example.com",value:O,onChange:e=>K(e.target.value),className:"bg-gray-50"})]}),ed&&(0,r.jsxs)("div",{className:"mt-3 space-y-2 animate-slideDown",children:[(0,r.jsx)(_.J,{htmlFor:"hashtag-input",children:"Add hashtags"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(C.p,{id:"hashtag-input",placeholder:"Enter hashtag (without #)",value:ei,onChange:e=>en(e.target.value),onKeyPress:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),ek())},className:"bg-gray-50 dark:bg-gray-700"}),(0,r.jsx)(n.$,{size:"sm",onClick:ek,disabled:!ei.trim(),children:"Add"})]}),et.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:et.map((e,s)=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-md text-sm",children:["#",e,(0,r.jsx)(n.$,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 hover:bg-blue-200 dark:hover:bg-blue-800",onClick:()=>eb(e),children:(0,r.jsx)(c.A,{className:"h-3 w-3"})})]},s))})]}),q&&(0,r.jsxs)("div",{className:"mt-3 space-y-2 animate-slideDown",children:[(0,r.jsx)(_.J,{htmlFor:"feeling-input",children:"How are you feeling?"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 mt-2",children:z.map(e=>(0,r.jsx)(n.$,{variant:q===e?"default":"outline",size:"sm",className:(0,b.cn)("text-xs capitalize",q===e&&"bg-[#1d2b7d] text-white hover:bg-[#1d2b7d]/90"),onClick:()=>J(e),children:e},e))})]})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700 pt-3",children:[(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(n.$,{variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",onClick:()=>{var e;return null==(e=eA.current)?void 0:e.click()},children:[(0,r.jsx)(o.A,{className:"h-5 w-5 mr-1"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Photo"}),(0,r.jsx)(C.p,{type:"file",ref:eA,className:"hidden",accept:"image/*",onChange:e=>{var s;let a=null==(s=e.target.files)?void 0:s[0];if(a){X(a);let e=new FileReader;e.onload=()=>es(e.result),e.readAsDataURL(a)}}})]}),(0,r.jsxs)(n.$,{variant:O?"default":"ghost",size:"sm",className:(0,b.cn)("text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",O&&"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100"),onClick:()=>K(O?"":"https://example.com"),children:[(0,r.jsx)(x.A,{className:"h-5 w-5 mr-1"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Link"})]}),(0,r.jsxs)(n.$,{variant:q?"default":"ghost",size:"sm",className:(0,b.cn)("text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",q&&"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100"),onClick:()=>J(q?"":"excited"),children:[(0,r.jsx)(h,{className:"h-5 w-5 mr-1"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Feeling"})]}),(0,r.jsxs)(n.$,{variant:ed?"default":"ghost",size:"sm",className:(0,b.cn)("text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",ed&&"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100"),onClick:()=>ec(!ed),children:[(0,r.jsx)(m.A,{className:"h-5 w-5 mr-1"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Hashtag"})]})]}),(0,r.jsx)(n.$,{className:"bg-[#1d2b7d] hover:bg-[#1d2b7d]/90 text-white disabled:opacity-50 disabled:cursor-not-allowed",size:"sm",onClick:eN,disabled:!V.trim()&&!ee&&!O||ea,children:ea?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{className:"h-4 w-4 animate-spin sm:mr-1"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Posting..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{className:"h-4 w-4 sm:mr-1"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Post"})]})})]})]})}),u&&0===eS.length?(0,r.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,r.jsx)(l.Zp,{className:"animate-pulse",children:(0,r.jsx)(l.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})})},e))}):(0,r.jsxs)(r.Fragment,{children:[eS.map((e,a)=>{let t=a===eS.length-1;return(0,r.jsx)("div",{ref:t?ev:null,children:(0,r.jsxs)(l.Zp,{className:"shadow-sm border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 overflow-hidden",children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-start p-4 space-y-0",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsxs)(i.eu,{className:"cursor-pointer",onClick:()=>eE(e.id),children:[(0,r.jsx)(i.BK,{src:e.author_avatar||E.A.src,alt:e.author||"Anonymous"}),(0,r.jsx)(i.q5,{children:(e.author||"A").charAt(0)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("span",{className:"font-semibold cursor-pointer hover:underline",onClick:()=>eE(e.id),children:e.author||"Anonymous"})}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex flex-wrap items-center",children:[(0,r.jsxs)("span",{children:["@",e.is_anonymous?"anonymous":"user"]}),(0,r.jsx)("span",{className:"mx-1",children:"•"}),(0,r.jsx)("span",{children:eR(e.created_at)})]})]})]}),(0,r.jsxs)(k.rI,{children:[(0,r.jsx)(k.ty,{asChild:!0,children:(0,r.jsxs)(n.$,{variant:"ghost",size:"icon",className:"ml-auto rounded-full h-8 w-8",children:[(0,r.jsx)(f.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,r.jsxs)(k.SQ,{align:"end",children:[(0,r.jsx)(k._2,{onClick:()=>e_(e.id),children:"Share"}),(0,r.jsx)(k._2,{onClick:()=>eE(e.id),children:"View Post"}),(0,r.jsx)(k._2,{onClick:()=>eC(),children:"Bookmark (Coming Soon)"})]})]})]}),(0,r.jsxs)(l.Wu,{className:"p-0",children:[e.content&&(0,r.jsx)("div",{className:"px-4 py-2 text-base cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50",onClick:()=>eE(e.id),children:e.content}),e.emotion&&(0,r.jsx)("div",{className:"px-4 pb-2",children:(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-purple-50 text-purple-700 rounded-full text-sm font-medium",children:["\uD83D\uDE0A Feeling ",e.emotion]})}),e.link&&(0,r.jsx)("div",{className:"px-4 pb-2",children:(0,r.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-50 text-blue-600 rounded-lg text-sm hover:bg-blue-100 transition-colors",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"View Link"]})}),e.tags&&e.tags.length>0&&(0,r.jsx)("div",{className:"px-4 pb-3 flex flex-wrap gap-1",children:e.tags.map((e,s)=>(0,r.jsxs)("span",{className:"text-blue-500 hover:underline cursor-pointer text-md",children:["#",e]},s))}),e.image&&e.image.url&&(0,r.jsx)("div",{className:"relative cursor-pointer flex justify-center",onClick:()=>eE(e.id),children:(0,r.jsx)("div",{className:"overflow-hidden bg-gray-100 dark:bg-gray-800 flex justify-center items-center",children:(0,r.jsx)(N.default,{src:e.image.url,alt:e.image.alt_text||"Post content",width:800,height:300,className:"w-auto object-cover hover:scale-105 transition-transform duration-300",style:{minHeight:"300px",maxHeight:"70vh",width:"auto",objectFit:"cover",margin:"0 auto"}})})}),ey[e.id]&&(0,r.jsx)("div",{className:"px-4 py-2 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400",children:ey[e.id]}),(0,r.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(n.$,{variant:"ghost",size:"sm",className:(0,b.cn)("flex items-center space-x-1 px-2 transition-colors duration-200",e.is_liked_by_user?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20":"text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"),onClick:()=>{var s;let r=e.id;console.log("\uD83D\uDDB1️ Heart button clicked:",{postId:r,postIdType:typeof r,postTitle:(null==(s=e.title)?void 0:s.substring(0,30))+"...",currentLikeStatus:e.is_liked_by_user,currentLikeCount:e.like_count,postIndex:a}),ew(r)},children:[(0,r.jsx)(y.A,{className:(0,b.cn)("h-5 w-5 transition-all duration-200","hover:scale-110",e.is_liked_by_user&&"fill-current"),fill:e.is_liked_by_user?"currentColor":"none"}),(0,r.jsx)("span",{className:"font-medium",children:e.like_count})]}),(0,r.jsx)(n.$,{variant:"ghost",size:"sm",className:"flex items-center space-x-1 px-2 text-gray-600 dark:text-gray-400",onClick:()=>s.push("/user-dashboard/feed/".concat(e.id)),children:(0,r.jsx)(A.A,{className:"h-5 w-5"})}),(0,r.jsxs)(k.rI,{children:[(0,r.jsx)(k.ty,{asChild:!0,children:(0,r.jsx)(n.$,{variant:"ghost",size:"sm",className:"flex items-center space-x-1 px-2 text-gray-600 dark:text-gray-400",children:(0,r.jsx)(v.A,{className:"h-5 w-5"})})}),(0,r.jsxs)(k.SQ,{align:"start",children:[(0,r.jsxs)(k._2,{onClick:()=>eL(e.id),children:[(0,r.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),(0,r.jsxs)(k._2,{onClick:()=>e_(e.id),children:[(0,r.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Share Post"]})]})]})]}),(0,r.jsx)(n.$,{variant:"ghost",size:"sm",className:(0,b.cn)("px-2","text-gray-600 dark:text-gray-400"),onClick:()=>eC(),children:(0,r.jsx)(j.A,{className:(0,b.cn)("h-5 w-5 transition-transform")})})]})]})]})},"post-".concat(e.id,"-").concat(e.like_count,"-").concat(e.is_liked_by_user))}),Q&&(0,r.jsx)("div",{className:"py-4 flex justify-center",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(g,{className:"h-5 w-5 animate-spin text-gray-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Loading more posts..."})]})}),!u&&!Q&&eS.length>0&&!B&&(0,r.jsx)("div",{className:"py-4 text-center text-gray-500 dark:text-gray-400",children:(0,r.jsx)("p",{children:"You've reached the end of the feed!"})})]}),0===eS.length&&!u&&(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("p",{className:"text-lg",children:"No posts yet"}),(0,r.jsx)("p",{className:"text-sm mt-2",children:"Be the first to share something!"})]})]})}},66516:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(19946).A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},66695:(e,s,a)=>{"use strict";a.d(s,{Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>n});var r=a(95155),t=a(12115),l=a(59434);let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...t})});i.displayName="Card";let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...t})});n.displayName="CardHeader";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("font-semibold leading-none tracking-tight",a),...t})});d.displayName="CardTitle",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...t})}).displayName="CardDescription";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...t})});c.displayName="CardContent",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...t})}).displayName="CardFooter"},71366:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(19946).A)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},85057:(e,s,a)=>{"use strict";a.d(s,{J:()=>c});var r=a(95155),t=a(12115),l=a(40968),i=a(74466),n=a(59434);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.b,{ref:s,className:(0,n.cn)(d(),a),...t})});c.displayName=l.b.displayName},86491:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r={src:"/_next/static/media/user.3dba856b.jpg",height:1024,width:1024,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAAmgX/xAAcEAADAAEFAAAAAAAAAAAAAAABAgMEABESE0H/2gAIAQEAAT8ArGC4WPRS3c5bkPNgdf/EABgRAAIDAAAAAAAAAAAAAAAAAAABAiGB/9oACAECAQE/AIqtZ//EABgRAAIDAAAAAAAAAAAAAAAAAAABAjGB/9oACAEDAQE/AJXiP//Z",blurWidth:8,blurHeight:8}},88539:(e,s,a)=>{"use strict";a.d(s,{T:()=>i});var r=a(95155),t=a(12115),l=a(59434);let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...t})});i.displayName="Textarea"},91394:(e,s,a)=>{"use strict";a.d(s,{BK:()=>d,eu:()=>n,q5:()=>c});var r=a(95155),t=a(12115),l=a(54011),i=a(59434);let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.bL,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t})});n.displayName=l.bL.displayName;let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l._V,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",a),...t})});d.displayName=l._V.displayName;let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.H4,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t})});c.displayName=l.H4.displayName},94744:(e,s,a)=>{Promise.resolve().then(a.bind(a,63430))},97953:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r={src:"/_next/static/media/logo8.475bacfe.png",height:1024,width:1024,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAHlBMVEVMaXE1NoEzNn8yM3oxMY1CRIw5O4U0NHo1OINQU5uyQgq5AAAACnRSTlMAU2QgCTp8GJC04WwTigAAAAlwSFlzAAALEwAACxMBAJqcGAAAADJJREFUeJw9ikkOwDAQg7BnS/7/4WikqhwB+ElVKYHqe7uA6HM6tknSCtuWh8yJmJ0/HhX/AJiq8pY/AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}}},e=>{var s=s=>e(e.s=s);e.O(0,[7598,3863,6766,3024,2043,9267,1118,8185,4937,8441,1684,7358],()=>s(94744)),_N_E=e.O()}]);