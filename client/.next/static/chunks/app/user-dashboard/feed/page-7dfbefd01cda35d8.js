(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4278],{44838:(e,s,a)=>{"use strict";a.d(s,{SQ:()=>x,_2:()=>u,lp:()=>h,mB:()=>g,rI:()=>o,ty:()=>m});var t=a(95155),r=a(12115),l=a(48698),n=a(13052),i=a(5196),d=a(9428),c=a(59434);let o=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb,l.z6,r.forwardRef((e,s)=>{let{className:a,inset:r,children:i,...d}=e;return(0,t.jsxs)(l.ZP,{ref:s,className:(0,c.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...d,children:[i,(0,t.jsx)(n.A,{className:"ml-auto"})]})}).displayName=l.ZP.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.G5,{ref:s,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...r})}).displayName=l.G5.displayName;let x=r.forwardRef((e,s)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsx)(l.UC,{ref:s,sideOffset:r,className:(0,c.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...n})})});x.displayName=l.UC.displayName;let u=r.forwardRef((e,s)=>{let{className:a,inset:r,...n}=e;return(0,t.jsx)(l.q7,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...n})});u.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:a,children:r,checked:n,...d}=e;return(0,t.jsxs)(l.H_,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...d,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})}),r]})}).displayName=l.H_.displayName,r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(l.hN,{ref:s,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.hN.displayName;let h=r.forwardRef((e,s)=>{let{className:a,inset:r,...n}=e;return(0,t.jsx)(l.JU,{ref:s,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})});h.displayName=l.JU.displayName;let g=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});g.displayName=l.wv.displayName},62523:(e,s,a)=>{"use strict";a.d(s,{p:()=>n});var t=a(95155),r=a(12115),l=a(59434);let n=r.forwardRef((e,s)=>{let{className:a,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...n})});n.displayName="Input"},66695:(e,s,a)=>{"use strict";a.d(s,{Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>i});var t=a(95155),r=a(12115),l=a(59434);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...r})});n.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},85057:(e,s,a)=>{"use strict";a.d(s,{J:()=>c});var t=a(95155),r=a(12115),l=a(40968),n=a(74466),i=a(59434);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.b,{ref:s,className:(0,i.cn)(d(),a),...r})});c.displayName=l.b.displayName},86477:(e,s,a)=>{"use strict";a.d(s,{default:()=>I});var t=a(95155),r=a(12115),l=a(66695),n=a(91394),i=a(30285),d=a(85339),c=a(47863),o=a(66474),m=a(62525),x=a(54416),u=a(27213),h=a(38164),g=a(99424),p=a(15448),f=a(51154),v=a(12486),j=a(5623),b=a(51976),N=a(71366),y=a(66516),k=a(62108),w=a(44838),A=a(59434),C=a(66766),_=a(88539),R=a(62523),z=a(85057),L=a(35695),S=a(97953),T=a(88106);let M=T.bL,F=T.R6,P=T.Ke;var B=a(55863);let E=r.forwardRef((e,s)=>{let{className:a,value:r,...l}=e;return(0,t.jsx)(B.bL,{ref:s,className:(0,A.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...l,children:(0,t.jsx)(B.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});E.displayName=B.bL.displayName;var D=a(53680),J=a(12840);let H=["happy","excited","grateful","relaxed","loved","accomplished","productive","motivated","inspired","curious","thoughtful","calm","blessed","thankful","hopeful","proud","content","amused","optimistic","energetic"];function I(){let e=(0,D.jL)(),s=(0,L.useRouter)(),{publicPosts:a,isLoading:T,error:B}=(0,D.j6)(),{}=(0,D._9)(),[I,$]=(0,r.useState)(1),[U,W]=(0,r.useState)(!0),[Z,q]=(0,r.useState)(!1),O=(0,r.useRef)(null),[V,Q]=(0,r.useState)([]),[K,G]=(0,r.useState)(""),[Y,X]=(0,r.useState)(""),[ee,es]=(0,r.useState)(""),[ea,et]=(0,r.useState)(""),[er,el]=(0,r.useState)(null),[en,ei]=(0,r.useState)(""),[ed,ec]=(0,r.useState)(!1),[eo,em]=(0,r.useState)([]),[ex,eu]=(0,r.useState)(""),[eh,eg]=(0,r.useState)(!1),[ep,ef]=(0,r.useState)(null),[ev,ej]=(0,r.useState)(null),[eb,eN]=(0,r.useState)(null),ey=(0,r.useRef)(null),ek=(0,r.useRef)(null),[ew,eA]=(0,r.useState)(null),[eC]=(0,r.useState)({}),e_=(0,r.useRef)(null),[eR,ez]=(0,r.useState)(!1),[eL,eS]=(0,r.useState)({title:{valid:!1,message:""},content:{valid:!1,message:""},image:{valid:!0,message:""}}),eT=e=>e.length<5?{valid:!1,message:"Title must be at least 5 characters"}:e.length>255?{valid:!1,message:"Title must be less than 255 characters"}:{valid:!0,message:""},eM=e=>e.length<10?{valid:!1,message:"Content must be at least 10 characters"}:e.length>5e3?{valid:!1,message:"Content must be less than 5000 characters"}:{valid:!0,message:""},eF=e=>e&&e.size>5242880?{valid:!1,message:"Image must be less than 5MB"}:{valid:!0,message:""};(0,r.useEffect)(()=>{eS({title:eT(K),content:eM(Y),image:eF(er)})},[K,Y,er]),(0,r.useEffect)(()=>{$(1),Q([]),W(!0),e((0,J.dc)({page:1})).unwrap().then(e=>{let s=e.data||[];console.log("\uD83D\uDCE5 Initial posts loaded:",{count:s.length,samplePost:s[0]?{id:s[0].id,like_count:s[0].like_count,is_liked_by_user:s[0].is_liked_by_user,hasIsLikedProperty:"is_liked_by_user"in s[0]}:null}),Q(s),s.length<10&&W(!1)}).catch(e=>{console.error("Failed to load initial posts:",e)})},[e]),(0,r.useEffect)(()=>{1===I&&Array.isArray(a)&&Q(a)},[a,I]);let eP=(0,r.useCallback)(s=>{T||Z||(O.current&&O.current.disconnect(),O.current=new IntersectionObserver(s=>{s[0].isIntersecting&&U&&!Z&&(async()=>{if(T||Z||!U)return;q(!0);let s=I+1;try{let a=(await e((0,J.dc)({page:s})).unwrap()).data||[];Q(e=>[...e,...a]),(0===a.length||a.length<10)&&W(!1),$(s)}catch(e){console.error("Error loading more posts:",e),eA("Failed to load more posts. Please try again."),setTimeout(()=>eA(null),3e3)}finally{q(!1)}})()},{threshold:.5}),s&&O.current.observe(s))},[T,Z,U,I,e]);(0,r.useEffect)(()=>{(ep||ev)&&(ey.current&&(clearTimeout(ey.current),ey.current=null),ef(null),ej(null))},[K,Y,er,ea,eo,ep,ev]),(0,r.useEffect)(()=>()=>{ey.current&&clearTimeout(ey.current),ek.current&&clearTimeout(ek.current)},[]);let eB=()=>{el(null),ei(""),e_.current&&(e_.current.value="")},eE=()=>{ex.trim()&&!eo.includes(ex.trim())&&(em([...eo,ex.trim()]),eu(""))},eD=e=>{em(eo.filter(s=>s!==e))},eJ=async()=>{if(!Y.trim()&&!en&&!ea)return void ef("Please add some content, an image, or a link to create a post.");ec(!0),ef(null),ej(null),ey.current&&(clearTimeout(ey.current),ey.current=null);try{let s={title:K.trim()||"Untitled Post",content:Y,emotion:ee||void 0,link:ea||void 0,is_anonymous:!0,tags:eo,...er&&{image:er}};await e((0,J.pD)(s)).unwrap(),G(""),X(""),es(""),et(""),em([]),eu(""),eg(!1),eB(),ek.current&&(clearTimeout(ek.current),ek.current=null),ef(null),ej(null),eN("Post created successfully!"),ek.current=setTimeout(()=>{eN(null),ek.current=null},5e3);let a=(await e((0,J.dc)({page:1})).unwrap()).data||[];Q(a),$(1)}catch(e){if(console.error("Failed to create post:",e),(null==e?void 0:e.errors)&&"object"==typeof e.errors&&Object.keys(e.errors).length>0){ej(e.errors);let s=Object.keys(e.errors);ef("Please fix the following issues: ".concat(s.join(", "))),ey.current=setTimeout(()=>{ef(null),ej(null),ey.current=null},1e4)}else(null==e?void 0:e.message)?(ef(e.message),ej(null),ey.current=setTimeout(()=>{ef(null),ey.current=null},5e3)):"string"==typeof e?(ef(e),ej(null),ey.current=setTimeout(()=>{ef(null),ey.current=null},5e3)):(ef("Failed to create post. Please try again."),ej(null),ey.current=setTimeout(()=>{ef(null),ey.current=null},5e3))}finally{ec(!1)}},eH=async s=>{eA(null);let a=V.find(e=>e.id===s);if(!a)return void console.error("❌ Post not found in allPosts:",s);let t=a.is_liked_by_user||!1,r=t?a.like_count-1:a.like_count+1;Q(e=>e.map(e=>e.id===s?{...e,is_liked_by_user:!t,like_count:r}:e));try{t?await e((0,J.Rn)(s)).unwrap():await e((0,J.kL)(s)).unwrap(),e((0,J.dc)({page:I}))}catch(e){console.error("❌ Failed to toggle like:",e),Q(e=>e.map(e=>e.id===s?{...e,is_liked_by_user:t,like_count:a.like_count}:e)),eA("Failed to toggle like. Please try again."),setTimeout(()=>eA(null),3e3)}},eI=()=>{console.log("Bookmark functionality not yet implemented")},e$=e=>{let s="".concat(window.location.origin,"/user-dashboard/feed/").concat(e);navigator.share?navigator.share({title:"Check out this post",text:"Interesting post from our social feed",url:s}).catch(console.error):navigator.clipboard.writeText(s).then(()=>{alert("Link copied to clipboard!")}).catch(()=>{alert("Failed to copy link")})},eU=e=>{let s="".concat(window.location.origin,"/user-dashboard/feed/").concat(e);navigator.clipboard.writeText(s).then(()=>{alert("Link copied to clipboard!")}).catch(()=>{alert("Failed to copy link")})},eW=e=>{let s=new Date(e),a=Math.floor((new Date().getTime()-s.getTime())/6e4);return a<1?"Just now":a<60?"".concat(a,"m ago"):a<1440?"".concat(Math.floor(a/60),"h ago"):"".concat(Math.floor(a/1440),"d ago")},eZ=e=>{s.push("/user-dashboard/feed/".concat(e))},eq=V.length>0?V:Array.isArray(a)?a:[];return(0,t.jsxs)("div",{className:"space-y-4",children:[B&&(0,t.jsx)(l.Zp,{className:"border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200 mb-1",children:"Error loading posts"}),(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:B})]}),(0,t.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>e((0,J.dc)()),className:"flex-shrink-0 border-red-300 text-red-700 hover:bg-red-100 dark:border-red-600 dark:text-red-300 dark:hover:bg-red-900/30",children:"Try Again"})]})})}),ew&&(0,t.jsx)(l.Zp,{className:"border-orange-200 bg-orange-50 dark:bg-orange-900/20 dark:border-orange-800 sticky top-0 z-10",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-orange-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.485 3.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 3.495zM10 6a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 6zm0 9a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:ew})}),(0,t.jsxs)("button",{onClick:()=>eA(null),className:"flex-shrink-0 text-orange-400 hover:text-orange-600 dark:hover:text-orange-300",children:[(0,t.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,t.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})})}),(ep||ev)&&(0,t.jsx)(l.Zp,{className:"border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800 sticky top-0 z-10",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[ep&&(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200 mb-2",children:ep}),ev&&(0,t.jsx)("div",{className:"space-y-2 mt-2",children:Object.entries(ev).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"bg-red-100 dark:bg-red-900/30 p-3 rounded-md",children:[(0,t.jsxs)("p",{className:"text-sm font-semibold text-red-800 dark:text-red-200 capitalize mb-1",children:[s," ","title"===s||"content"===s?"Issue":"Error",":"]}),(0,t.jsx)("ul",{className:"space-y-1",children:a.map((e,s)=>(0,t.jsxs)("li",{className:"text-sm text-red-700 dark:text-red-300 flex items-start",children:[(0,t.jsx)("span",{className:"mr-2",children:"•"}),(0,t.jsx)("span",{children:e})]},s))})]},s)})})]}),(0,t.jsxs)("button",{onClick:()=>{ef(null),ej(null)},className:"flex-shrink-0 text-red-400 hover:text-red-600 dark:hover:text-red-300",children:[(0,t.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,t.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})})}),eb&&(0,t.jsx)(l.Zp,{className:"border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-800 sticky top-0 z-10",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("p",{className:"text-sm text-green-700 dark:text-green-300",children:[eb," Your post has been shared with the community."]})}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>s.push("/user-dashboard/my-posts"),className:"flex-shrink-0 border-green-300 text-green-700 hover:bg-green-100 dark:border-green-600 dark:text-green-300 dark:hover:bg-green-900/30",children:"View My Posts"}),(0,t.jsxs)("button",{onClick:()=>eN(null),className:"flex-shrink-0 text-green-400 hover:text-green-600 dark:hover:text-green-300",children:[(0,t.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,t.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})]})})}),(0,t.jsx)(l.Zp,{className:"border-blue-200 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-800",children:(0,t.jsxs)(M,{open:eR,onOpenChange:ez,className:"w-full",children:[(0,t.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.A,{className:"h-5 w-5 text-blue-500"}),(0,t.jsx)("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Post Requirements"})]}),(0,t.jsx)(F,{asChild:!0,children:(0,t.jsx)(i.$,{variant:"ghost",size:"sm",className:"w-9 p-0",children:eR?(0,t.jsx)(c.A,{className:"h-4 w-4"}):(0,t.jsx)(o.A,{className:"h-4 w-4"})})})]}),(0,t.jsx)(P,{children:(0,t.jsxs)("div",{className:"px-4 pb-4 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsxs)(z.J,{className:(0,A.cn)("text-sm",eL.title.valid?"text-green-600":"text-gray-600"),children:["Title (",K.length,"/255)"]}),eL.title.message&&(0,t.jsx)("span",{className:"text-xs text-red-500",children:eL.title.message})]}),(0,t.jsx)(E,{value:K.length/255*100,className:"h-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsxs)(z.J,{className:(0,A.cn)("text-sm",eL.content.valid?"text-green-600":"text-gray-600"),children:["Content (",Y.length,"/5000)"]}),eL.content.message&&(0,t.jsx)("span",{className:"text-xs text-red-500",children:eL.content.message})]}),(0,t.jsx)(E,{value:Y.length/5e3*100,className:"h-1"})]}),er&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)(z.J,{className:(0,A.cn)("text-sm",eL.image.valid?"text-green-600":"text-gray-600"),children:["Image Size (",(er.size/1048576).toFixed(2),"MB/5MB)"]}),eL.image.message&&(0,t.jsx)("span",{className:"text-xs text-red-500",children:eL.image.message})]}),(0,t.jsx)(E,{value:er.size/5242880*100,className:"h-1"})]})]})})]})}),(0,t.jsx)(l.Zp,{className:"shadow-sm border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 overflow-hidden",children:(0,t.jsxs)(l.Wu,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsxs)(n.eu,{className:"h-10 w-10",children:[(0,t.jsx)(n.BK,{src:S.A.src,alt:"User"}),(0,t.jsx)(n.q5,{children:"U"})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(R.p,{placeholder:"Give your post a title...",className:"w-full border-0 focus-visible:ring-0 text-lg font-medium bg-transparent mb-2",value:K,onChange:e=>G(e.target.value)}),(0,t.jsx)(_.T,{placeholder:"What's on your mind?",className:"w-full border-0 focus-visible:ring-0 resize-none p-0 text-base bg-transparent",value:Y,onChange:e=>X(e.target.value)}),en&&(0,t.jsxs)("div",{className:"relative mt-2 w-full max-w-xs",children:[(0,t.jsx)(C.default,{src:en||"/placeholder.svg",alt:"Preview",width:200,height:150,className:"rounded-md object-cover"}),(0,t.jsx)(i.$,{variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:eB,children:(0,t.jsx)(m.A,{className:"h-3 w-3"})})]}),ea&&(0,t.jsxs)("div",{className:"mt-3 space-y-2 animate-slideDown",children:[(0,t.jsx)(z.J,{htmlFor:"link-input",children:"Add a link"}),(0,t.jsx)(R.p,{id:"link-input",placeholder:"https://example.com",value:ea,onChange:e=>et(e.target.value),className:"bg-gray-50"})]}),eh&&(0,t.jsxs)("div",{className:"mt-3 space-y-2 animate-slideDown",children:[(0,t.jsx)(z.J,{htmlFor:"hashtag-input",children:"Add hashtags"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(R.p,{id:"hashtag-input",placeholder:"Enter hashtag (without #)",value:ex,onChange:e=>eu(e.target.value),onKeyPress:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eE())},className:"bg-gray-50 dark:bg-gray-700"}),(0,t.jsx)(i.$,{size:"sm",onClick:eE,disabled:!ex.trim(),children:"Add"})]}),eo.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:eo.map((e,s)=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-md text-sm",children:["#",e,(0,t.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 hover:bg-blue-200 dark:hover:bg-blue-800",onClick:()=>eD(e),children:(0,t.jsx)(x.A,{className:"h-3 w-3"})})]},s))})]}),ee&&(0,t.jsxs)("div",{className:"mt-3 space-y-2 animate-slideDown",children:[(0,t.jsx)(z.J,{htmlFor:"feeling-input",children:"How are you feeling?"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2 mt-2",children:H.map(e=>(0,t.jsx)(i.$,{variant:ee===e?"default":"outline",size:"sm",className:(0,A.cn)("text-xs capitalize",ee===e&&"bg-[#1d2b7d] text-white hover:bg-[#1d2b7d]/90"),onClick:()=>es(e),children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-between border-t border-gray-100 dark:border-gray-700 pt-3",children:[(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(i.$,{variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",onClick:()=>{var e;return null==(e=e_.current)?void 0:e.click()},children:[(0,t.jsx)(u.A,{className:"h-5 w-5 mr-1"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Photo"}),(0,t.jsx)(R.p,{type:"file",ref:e_,className:"hidden",accept:"image/*",onChange:e=>{var s;let a=null==(s=e.target.files)?void 0:s[0];if(a){let e=eF(a);if(!e.valid)return void eS(s=>({...s,image:e}));el(a);let s=new FileReader;s.onload=()=>ei(s.result),s.readAsDataURL(a)}}})]}),(0,t.jsxs)(i.$,{variant:ea?"default":"ghost",size:"sm",className:(0,A.cn)("text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",ea&&"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100"),onClick:()=>et(ea?"":"https://example.com"),children:[(0,t.jsx)(h.A,{className:"h-5 w-5 mr-1"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Link"})]}),(0,t.jsxs)(i.$,{variant:ee?"default":"ghost",size:"sm",className:(0,A.cn)("text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",ee&&"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100"),onClick:()=>es(ee?"":"excited"),children:[(0,t.jsx)(g.A,{className:"h-5 w-5 mr-1"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Feeling"})]}),(0,t.jsxs)(i.$,{variant:eh?"default":"ghost",size:"sm",className:(0,A.cn)("text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",eh&&"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100"),onClick:()=>eg(!eh),children:[(0,t.jsx)(p.A,{className:"h-5 w-5 mr-1"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Hashtag"})]})]}),(0,t.jsx)(i.$,{className:"bg-[#1d2b7d] hover:bg-[#1d2b7d]/90 text-white disabled:opacity-50 disabled:cursor-not-allowed",size:"sm",onClick:eJ,disabled:!(eL.title.valid&&eL.content.valid&&eL.image.valid&&!ed),children:ed?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.A,{className:"h-4 w-4 animate-spin sm:mr-1"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Posting..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.A,{className:"h-4 w-4 sm:mr-1"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Post"})]})})]})]})}),T&&0===eq.length?(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,t.jsx)(l.Zp,{className:"animate-pulse",children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})})},e))}):(0,t.jsxs)(t.Fragment,{children:[eq.map((e,a)=>{let r=a===eq.length-1;return(0,t.jsx)("div",{ref:r?eP:null,children:(0,t.jsxs)(l.Zp,{className:"shadow-sm border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 overflow-hidden",children:[(0,t.jsxs)(l.aR,{className:"flex flex-row items-start p-4 space-y-0",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsxs)(n.eu,{className:"cursor-pointer",onClick:()=>eZ(e.id),children:[(0,t.jsx)(n.BK,{src:e.author_avatar||S.A.src,alt:e.author||"Anonymous"}),(0,t.jsx)(n.q5,{children:(e.author||"A").charAt(0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("span",{className:"font-semibold cursor-pointer hover:underline",onClick:()=>eZ(e.id),children:e.author||"Anonymous"})}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex flex-wrap items-center",children:[(0,t.jsxs)("span",{children:["@",e.is_anonymous?"anonymous":"user"]}),(0,t.jsx)("span",{className:"mx-1",children:"•"}),(0,t.jsx)("span",{children:eW(e.created_at)})]})]})]}),(0,t.jsxs)(w.rI,{children:[(0,t.jsx)(w.ty,{asChild:!0,children:(0,t.jsxs)(i.$,{variant:"ghost",size:"icon",className:"ml-auto rounded-full h-8 w-8",children:[(0,t.jsx)(j.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,t.jsxs)(w.SQ,{align:"end",children:[(0,t.jsx)(w._2,{onClick:()=>e$(e.id),children:"Share"}),(0,t.jsx)(w._2,{onClick:()=>eZ(e.id),children:"View Post"}),(0,t.jsx)(w._2,{onClick:()=>eI(),children:"Bookmark (Coming Soon)"})]})]})]}),(0,t.jsxs)(l.Wu,{className:"p-0",children:[e.content&&(0,t.jsx)("div",{className:"px-4 py-2 text-base cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50",onClick:()=>eZ(e.id),children:e.content}),e.emotion&&(0,t.jsx)("div",{className:"px-4 pb-2",children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-purple-50 text-purple-700 rounded-full text-sm font-medium",children:["\uD83D\uDE0A Feeling ",e.emotion]})}),e.link&&(0,t.jsx)("div",{className:"px-4 pb-2",children:(0,t.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 bg-blue-50 text-blue-600 rounded-lg text-sm hover:bg-blue-100 transition-colors",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"View Link"]})}),e.tags&&e.tags.length>0&&(0,t.jsx)("div",{className:"px-4 pb-3 flex flex-wrap gap-1",children:e.tags.map((e,s)=>(0,t.jsxs)("span",{className:"text-blue-500 hover:underline cursor-pointer text-md",children:["#",e]},s))}),e.image&&e.image.url&&(0,t.jsx)("div",{className:"relative cursor-pointer flex justify-center",onClick:()=>eZ(e.id),children:(0,t.jsx)("div",{className:"overflow-hidden bg-gray-100 dark:bg-gray-800 flex justify-center items-center",children:(0,t.jsx)(C.default,{src:e.image.url,alt:e.image.alt_text||"Post content",width:800,height:300,className:"w-auto object-cover hover:scale-105 transition-transform duration-300",style:{minHeight:"300px",maxHeight:"70vh",width:"auto",objectFit:"cover",margin:"0 auto"}})})}),eC[e.id]&&(0,t.jsx)("div",{className:"px-4 py-2 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400",children:eC[e.id]}),(0,t.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(i.$,{variant:"ghost",size:"sm",className:(0,A.cn)("flex items-center space-x-1 px-2 transition-colors duration-200",e.is_liked_by_user?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20":"text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"),onClick:()=>{var s;let t=e.id;console.log("\uD83D\uDDB1️ Heart button clicked:",{postId:t,postIdType:typeof t,postTitle:(null==(s=e.title)?void 0:s.substring(0,30))+"...",currentLikeStatus:e.is_liked_by_user,currentLikeCount:e.like_count,postIndex:a}),eH(t)},children:[(0,t.jsx)(b.A,{className:(0,A.cn)("h-5 w-5 transition-all duration-200","hover:scale-110",e.is_liked_by_user&&"fill-current"),fill:e.is_liked_by_user?"currentColor":"none"}),(0,t.jsx)("span",{className:"font-medium",children:e.like_count})]}),(0,t.jsx)(i.$,{variant:"ghost",size:"sm",className:"flex items-center space-x-1 px-2 text-gray-600 dark:text-gray-400",onClick:()=>s.push("/user-dashboard/feed/".concat(e.id)),children:(0,t.jsx)(N.A,{className:"h-5 w-5"})}),(0,t.jsxs)(w.rI,{children:[(0,t.jsx)(w.ty,{asChild:!0,children:(0,t.jsx)(i.$,{variant:"ghost",size:"sm",className:"flex items-center space-x-1 px-2 text-gray-600 dark:text-gray-400",children:(0,t.jsx)(y.A,{className:"h-5 w-5"})})}),(0,t.jsxs)(w.SQ,{align:"start",children:[(0,t.jsxs)(w._2,{onClick:()=>eU(e.id),children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),(0,t.jsxs)(w._2,{onClick:()=>e$(e.id),children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Share Post"]})]})]})]}),(0,t.jsx)(i.$,{variant:"ghost",size:"sm",className:(0,A.cn)("px-2","text-gray-600 dark:text-gray-400"),onClick:()=>eI(),children:(0,t.jsx)(k.A,{className:(0,A.cn)("h-5 w-5 transition-transform")})})]})]})]})},"post-".concat(e.id,"-").concat(e.like_count,"-").concat(e.is_liked_by_user))}),Z&&(0,t.jsx)("div",{className:"py-4 flex justify-center",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(f.A,{className:"h-5 w-5 animate-spin text-gray-500"}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"Loading more posts..."})]})}),!T&&!Z&&eq.length>0&&!U&&(0,t.jsx)("div",{className:"py-4 text-center text-gray-500 dark:text-gray-400",children:(0,t.jsx)("p",{children:"You've reached the end of the feed!"})})]}),0===eq.length&&!T&&(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[(0,t.jsx)("p",{className:"text-lg",children:"No posts yet"}),(0,t.jsx)("p",{className:"text-sm mt-2",children:"Be the first to share something!"})]})]})}},88539:(e,s,a)=>{"use strict";a.d(s,{T:()=>n});var t=a(95155),r=a(12115),l=a(59434);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...r})});n.displayName="Textarea"},91394:(e,s,a)=>{"use strict";a.d(s,{BK:()=>d,eu:()=>i,q5:()=>c});var t=a(95155),r=a(12115),l=a(54011),n=a(59434);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.bL,{ref:s,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});i.displayName=l.bL.displayName;let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l._V,{ref:s,className:(0,n.cn)("aspect-square h-full w-full",a),...r})});d.displayName=l._V.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.H4,{ref:s,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});c.displayName=l.H4.displayName},94744:(e,s,a)=>{Promise.resolve().then(a.bind(a,86477))},97953:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t={src:"/_next/static/media/logo8.475bacfe.png",height:1024,width:1024,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAHlBMVEVMaXE1NoEzNn8yM3oxMY1CRIw5O4U0NHo1OINQU5uyQgq5AAAACnRSTlMAU2QgCTp8GJC04WwTigAAAAlwSFlzAAALEwAACxMBAJqcGAAAADJJREFUeJw9ikkOwDAQg7BnS/7/4WikqhwB+ElVKYHqe7uA6HM6tknSCtuWh8yJmJ0/HhX/AJiq8pY/AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}}},e=>{var s=s=>e(e.s=s);e.O(0,[3863,7598,6766,3024,2043,9267,1118,962,8185,7224,8441,1684,7358],()=>s(94744)),_N_E=e.O()}]);