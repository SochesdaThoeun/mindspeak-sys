(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9483],{5513:(e,s,a)=>{"use strict";a.d(s,{PU:()=>n});var t=a(12115),r=a(53680),l=a(16860);let n=()=>{let e=(0,r.jL)(),s=(0,r.GV)(l.a7),a=(0,r.GV)(l.YQ),n=(0,r.GV)(l.H1),i=(0,r.GV)(l.cr),d=(0,r.GV)(l.IQ),o=(0,r.GV)(l.p8),c=(0,r.GV)(l.S6),m=(0,r.GV)(l.fn),u=(0,t.useCallback)(s=>e((0,l.Os)(s||{})),[e]),x=(0,t.useCallback)(s=>e((0,l._z)(s)),[e]),g=(0,t.useCallback)(s=>e((0,l.Xo)(s||{})),[e]),p=(0,t.useCallback)(s=>{e((0,l.LE)(s))},[e]),h=(0,t.useCallback)(()=>{e((0,l.VO)())},[e]),f=(0,t.useCallback)(()=>{e((0,l.ET)())},[e]),b=(0,t.useCallback)((s,a)=>{e((0,l.lg)({messageId:s,status:a}))},[e]);return{messages:s,pagination:a,filters:n,loading:i.fetchUserMessages,sendLoading:i.sendMessage,error:d,unreadMessages:o,respondedMessages:c,hasMore:m,fetchMessages:u,sendNewMessage:x,loadMore:g,setFilters:p,clearMessages:h,clearErrorState:f,updateStatus:b}}},26126:(e,s,a)=>{"use strict";a.d(s,{E:()=>i});var t=a(95155);a(12115);var r=a(74466),l=a(59434);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)(n({variant:a}),s),...r})}},30285:(e,s,a)=>{"use strict";a.d(s,{$:()=>o});var t=a(95155),r=a(12115),l=a(99708),n=a(74466),i=a(59434);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-white text-black hover:bg-gray-100",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"bg-transparent text-black hover:bg-gray-100",secondary:"bg-gray-100 text-black hover:bg-gray-200",ghost:"bg-transparent hover:bg-gray-100 text-black",link:"text-blue-600 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-10 px-6 text-base",icon:"h-9 w-9 p-0"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,s)=>{let{className:a,variant:r,size:n,asChild:o=!1,...c}=e,m=o?l.DX:"button";return(0,t.jsx)(m,{className:(0,i.cn)(d({variant:r,size:n,className:a})),ref:s,...c})});o.displayName="Button"},44838:(e,s,a)=>{"use strict";a.d(s,{SQ:()=>u,_2:()=>x,lp:()=>g,mB:()=>p,rI:()=>c,ty:()=>m});var t=a(95155),r=a(12115),l=a(48698),n=a(13052),i=a(5196),d=a(9428),o=a(59434);let c=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb,l.z6,r.forwardRef((e,s)=>{let{className:a,inset:r,children:i,...d}=e;return(0,t.jsxs)(l.ZP,{ref:s,className:(0,o.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...d,children:[i,(0,t.jsx)(n.A,{className:"ml-auto"})]})}).displayName=l.ZP.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.G5,{ref:s,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...r})}).displayName=l.G5.displayName;let u=r.forwardRef((e,s)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsx)(l.UC,{ref:s,sideOffset:r,className:(0,o.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),...n})})});u.displayName=l.UC.displayName;let x=r.forwardRef((e,s)=>{let{className:a,inset:r,...n}=e;return(0,t.jsx)(l.q7,{ref:s,className:(0,o.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...n})});x.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:a,children:r,checked:n,...d}=e;return(0,t.jsxs)(l.H_,{ref:s,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...d,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})}),r]})}).displayName=l.H_.displayName,r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(l.hN,{ref:s,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.hN.displayName;let g=r.forwardRef((e,s)=>{let{className:a,inset:r,...n}=e;return(0,t.jsx)(l.JU,{ref:s,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})});g.displayName=l.JU.displayName;let p=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wv,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});p.displayName=l.wv.displayName},46295:(e,s,a)=>{Promise.resolve().then(a.bind(a,51036))},47262:(e,s,a)=>{"use strict";a.d(s,{S:()=>d});var t=a(95155),r=a(12115),l=a(76981),n=a(5196),i=a(59434);let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.bL,{ref:s,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,t.jsx)(l.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})})});d.displayName=l.bL.displayName},51036:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>es});var t=a(95155),r=a(12115),l=a(26126),n=a(30285),i=a(62523),d=a(15968),o=a(54653),c=a(47924),m=a(5196),u=a(54416),x=a(35169),g=a(92138),p=a(53680),h=a(76048),f=a(54165),b=a(88539),v=a(85339),j=a(74466),N=a(59434);let y=(0,j.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),w=r.forwardRef((e,s)=>{let{className:a,variant:r,...l}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,N.cn)(y({variant:r}),a),...l})});w.displayName="Alert",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h5",{ref:s,className:(0,N.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})}).displayName="AlertTitle";let C=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,N.cn)("text-sm [&_p]:leading-relaxed",a),...r})});function k(e){let{isOpen:s,onClose:a,onSubmit:l,isBulk:i,selectedCount:d=0,error:o,isLoading:c}=e,[m,x]=(0,r.useState)(""),g=async()=>{if(m.trim())try{await l(m),x("")}catch(e){}},p=()=>{x(""),a()};return(0,t.jsx)(f.lG,{open:s,onOpenChange:p,children:(0,t.jsxs)(f.Cf,{className:"sm:max-w-md",children:[(0,t.jsx)(f.c7,{children:(0,t.jsx)(f.L3,{children:i?"Reject ".concat(d," Posts"):"Reject Post"})}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Please provide a reason for rejecting ",i?"these posts":"this post",". This will be stored as an admin note."]}),o&&(0,t.jsxs)(w,{variant:"destructive",children:[(0,t.jsx)(v.A,{className:"h-4 w-4"}),(0,t.jsx)(C,{children:o})]}),(0,t.jsx)(b.T,{placeholder:"Enter admin note for rejection...",value:m,onChange:e=>x(e.target.value),className:"min-h-[100px]"})]}),(0,t.jsxs)(f.Es,{className:"sm:justify-end",children:[(0,t.jsx)(n.$,{type:"button",variant:"outline",onClick:p,disabled:c,children:"Cancel"}),(0,t.jsx)(n.$,{type:"button",variant:"destructive",onClick:g,disabled:!m.trim()||c,children:c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Rejecting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Reject"]})})]})]})})}function A(e){let{isOpen:s,onClose:a,onSubmit:r,isBulk:l,selectedCount:i=0,error:d,isLoading:o}=e,c=async()=>{try{await r()}catch(e){}};return(0,t.jsx)(f.lG,{open:s,onOpenChange:a,children:(0,t.jsxs)(f.Cf,{className:"sm:max-w-md",children:[(0,t.jsx)(f.c7,{children:(0,t.jsx)(f.L3,{children:l?"Approve ".concat(i," Posts"):"Approve Post"})}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Are you sure you want to approve ",l?"these posts":"this post","?"]}),d&&(0,t.jsxs)(w,{variant:"destructive",children:[(0,t.jsx)(v.A,{className:"h-4 w-4"}),(0,t.jsx)(C,{children:d})]})]}),(0,t.jsxs)(f.Es,{className:"sm:justify-end",children:[(0,t.jsx)(n.$,{type:"button",variant:"outline",onClick:a,disabled:o,children:"Cancel"}),(0,t.jsx)(n.$,{type:"button",variant:"default",onClick:c,disabled:o,className:"bg-green-600 hover:bg-green-700 text-white",children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Approving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Approve"]})})]})]})})}C.displayName="AlertDescription";var _=a(47262),P=a(44838),R=a(85127),S=a(27213),L=a(5623),T=a(92657),F=a(66766);let U=e=>{if(!e)return"bg-gray-100 text-gray-700 border-gray-200";switch(e.toLowerCase()){case"pending":return"bg-orange-100 text-orange-700 border-orange-200";case"approved":return"bg-green-100 text-green-700 border-green-200";case"rejected":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},D=e=>{if(!e)return"\uD83D\uDE10";switch(e.toLowerCase()){case"anxious":return"\uD83D\uDE30";case"guilty":return"\uD83D\uDE14";case"embarrassed":return"\uD83D\uDE33";case"sad":return"\uD83D\uDE22";case"confused":return"\uD83D\uDE15";case"happy":return"\uD83D\uDE0A";case"angry":return"\uD83D\uDE20";case"excited":return"\uD83E\uDD17";case"worried":return"\uD83D\uDE1F";case"scared":return"\uD83D\uDE28";default:return"\uD83D\uDE10"}},B=e=>{if(!e){let e=new Date;return{date:e.toLocaleDateString(),time:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),relative:"Unknown"}}let s=new Date(e);if(isNaN(s.getTime())){let e=new Date;return{date:e.toLocaleDateString(),time:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),relative:"Invalid date"}}return{date:s.toLocaleDateString(),time:s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),relative:E(s)}},E=e=>{if(!e||isNaN(e.getTime()))return"Unknown";let s=Math.floor((new Date().getTime()-e.getTime())/36e5);return s<1?"Just now":s<24?"".concat(s,"h ago"):s<48?"Yesterday":"".concat(Math.floor(s/24),"d ago")};function I(e){let{confessions:s,selectedConfessions:a,onSelectionChange:r,onSelectAll:i,onStatusChange:d,onView:o}=e,c=s.length>0&&a.length===s.length,x=a.length>0&&a.length<s.length,g=(e,s)=>{s?r([...a,e]):r(a.filter(s=>s!==e))};return(0,t.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm animate-fade-in",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(R.XI,{children:[(0,t.jsx)(R.A0,{children:(0,t.jsxs)(R.Hj,{className:"border-b border-gray-200 bg-gray-50",children:[(0,t.jsx)(R.nd,{className:"w-12 px-6 py-4",children:(0,t.jsx)(_.S,{checked:c,ref:e=>{e instanceof HTMLInputElement&&(e.indeterminate=x)},onCheckedChange:i,className:"border-gray-300"})}),(0,t.jsx)(R.nd,{className:"font-semibold text-gray-700 px-6 py-4",children:(0,t.jsx)("div",{className:"flex items-center gap-1",children:"User name"})}),(0,t.jsx)(R.nd,{className:"font-semibold text-gray-700 px-6 py-4 hidden md:table-cell",children:"Image"}),(0,t.jsx)(R.nd,{className:"font-semibold text-gray-700 px-6 py-4 hidden lg:table-cell",children:"Title"}),(0,t.jsx)(R.nd,{className:"font-semibold text-gray-700 px-6 py-4 hidden xl:table-cell",children:"Description"}),(0,t.jsx)(R.nd,{className:"font-semibold text-gray-700 px-6 py-4 hidden sm:table-cell",children:"Tags"}),(0,t.jsx)(R.nd,{className:"font-semibold text-gray-700 px-6 py-4",children:"Status"}),(0,t.jsx)(R.nd,{className:"font-semibold text-gray-700 px-6 py-4 hidden md:table-cell",children:"Engagement"}),(0,t.jsx)(R.nd,{className:"font-semibold text-gray-700 px-6 py-4 hidden lg:table-cell",children:"Date"}),(0,t.jsx)(R.nd,{className:"w-12 px-6 py-4"})]})}),(0,t.jsx)(R.BF,{children:s.map((e,s)=>{let r=B(e.timeConfession),i=a.includes(e.id);return(0,t.jsxs)(R.Hj,{className:"border-b border-gray-100 hover:bg-gray-50 transition-all duration-200 animate-slide-up ".concat(i?"bg-blue-50":""),style:{animationDelay:"".concat(50*s,"ms")},children:[(0,t.jsx)(R.nA,{className:"px-6 py-4",children:(0,t.jsx)(_.S,{checked:i,onCheckedChange:s=>g(e.id,s),className:"border-gray-300"})}),(0,t.jsx)(R.nA,{className:"px-6 py-4",children:(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.userName}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.category})]})})}),(0,t.jsx)(R.nA,{className:"px-6 py-4 hidden md:table-cell",children:e.image?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-lg overflow-hidden border border-gray-200",children:(0,t.jsx)(F.default,{src:e.image||"/placeholder.svg",width:"48",height:"48",className:"w-full h-full object-cover cursor-pointer hover:scale-105 transition-transform",alt:"Confession image",onClick:()=>o(e)})}),(0,t.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Yes"})]}):(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,t.jsx)(S.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm",children:"No"})]})}),(0,t.jsx)(R.nA,{className:"px-6 py-4 hidden lg:table-cell",children:(0,t.jsx)("div",{className:"max-w-xs",children:(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-900 line-clamp-1",children:e.title})})}),(0,t.jsx)(R.nA,{className:"px-6 py-4 hidden xl:table-cell",children:(0,t.jsx)("div",{className:"max-w-xs",children:(0,t.jsx)("p",{className:"text-sm text-gray-700 line-clamp-2",children:e.description})})}),(0,t.jsx)(R.nA,{className:"px-6 py-4 hidden sm:table-cell",children:e.tags&&e.tags.length>0?(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,2).map((e,s)=>(0,t.jsx)(l.E,{variant:"secondary",className:"text-xs",children:e},s)),e.tags.length>2&&(0,t.jsxs)(l.E,{variant:"outline",className:"text-xs",children:["+",e.tags.length-2]})]}):(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"No tags"})}),(0,t.jsx)(R.nA,{className:"px-6 py-4",children:(0,t.jsx)(l.E,{className:"".concat(U(e.status)," text-xs font-medium px-3 py-1"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,t.jsx)(R.nA,{className:"px-6 py-4 hidden md:table-cell",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-red-500",children:"❤"}),(0,t.jsx)("span",{children:e.likeCount})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-blue-500",children:"\uD83D\uDCAC"}),(0,t.jsx)("span",{children:e.commentCount})]})]})}),(0,t.jsx)(R.nA,{className:"px-6 py-4 hidden lg:table-cell",children:(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,t.jsx)("div",{children:r.date}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:r.time})]})}),(0,t.jsx)(R.nA,{className:"px-6 py-4",children:(0,t.jsxs)(P.rI,{children:[(0,t.jsx)(P.ty,{asChild:!0,children:(0,t.jsx)(n.$,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-gray-100",children:(0,t.jsx)(L.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(P.SQ,{align:"end",className:"w-48",children:[(0,t.jsxs)(P._2,{onClick:()=>o(e),children:[(0,t.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"View Details"]}),"approved"!==e.status&&(0,t.jsxs)(P._2,{className:"text-green-600",onClick:()=>d(e.id,"approved"),children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Approve"]}),"rejected"!==e.status&&(0,t.jsxs)(P._2,{className:"text-red-600",onClick:()=>d(e.id,"rejected"),children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Reject with Reason"]})]})]})})]},e.id)})})]})})})}var V=a(66695),q=a(71007),z=a(14186),G=a(33786);function M(e){let{confessions:s,selectedConfessions:a,onSelectionChange:r,onStatusChange:i,onView:d}=e;return(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3",children:s.map((e,s)=>{let o=B(e.timeConfession),c=a.includes(e.id);return(0,t.jsx)(V.Zp,{className:"rounded-xl border text-card-foreground p-6 bg-white/60 backdrop-blur-sm border-white/20 shadow-lg hover:shadow-xl transition-all duration-300 animate-slide-up overflow-hidden ".concat(c?"ring-2 ring-blue-500 border-blue-300":""),style:{animationDelay:"".concat(100*s,"ms")},children:(0,t.jsxs)(V.Wu,{className:"p-0",children:[e.image&&(0,t.jsxs)("div",{className:"relative rounded-xl h-50 w-full overflow-hidden",children:[(0,t.jsx)(F.default,{src:e.image||"/placeholder.svg",width:"400",height:"300",className:"w-full h-full object-cover cursor-pointer hover:scale-105 transition-transform duration-300",alt:"Confession image",onClick:()=>d(e)}),(0,t.jsx)("div",{className:"absolute top-3 right-3",children:(0,t.jsx)(_.S,{checked:c,className:"bg-white/80 border-white",onCheckedChange:s=>r(s?[...a,e.id]:a.filter(s=>s!==e.id))})}),(0,t.jsx)("div",{className:"absolute bottom-3 left-3",children:(0,t.jsx)(l.E,{className:"".concat(U(e.status)," shadow-sm"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]}),(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[!e.image&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(_.S,{checked:c,onCheckedChange:s=>r(s?[...a,e.id]:a.filter(s=>s!==e.id))}),(0,t.jsx)(l.E,{className:"".concat(U(e.status)," shadow-sm"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-medium",children:(0,t.jsx)(q.A,{className:"h-5 w-5"})})}),(0,t.jsx)("div",{children:(0,t.jsx)("h3",{className:"font-semibold text-gray-900 text-sm",children:e.userName})})]}),(0,t.jsxs)(P.rI,{children:[(0,t.jsx)(P.ty,{asChild:!0,children:(0,t.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,t.jsx)(L.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(P.SQ,{align:"end",children:[(0,t.jsxs)(P._2,{onClick:()=>d(e),children:[(0,t.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"View Details"]}),"approved"!==e.status&&(0,t.jsxs)(P._2,{className:"text-green-600",onClick:()=>i(e.id,"approved"),children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Approve"]}),"rejected"!==e.status&&(0,t.jsxs)(P._2,{className:"text-red-600",onClick:()=>i(e.id,"rejected"),children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Reject with Reason"]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 text-sm line-clamp-1",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-700 line-clamp-3",children:e.description})]}),e.tags&&e.tags.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,3).map((e,s)=>(0,t.jsx)(l.E,{variant:"secondary",className:"text-xs",children:e},s)),e.tags.length>3&&(0,t.jsxs)(l.E,{variant:"outline",className:"text-xs",children:["+",e.tags.length-3]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-red-500",children:"❤"}),(0,t.jsx)("span",{children:e.likeCount})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-blue-500",children:"\uD83D\uDCAC"}),(0,t.jsx)("span",{children:e.commentCount})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,t.jsx)(z.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:o.relative})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e.image&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-green-600",children:[(0,t.jsx)(S.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"text-xs",children:"Image"})]}),e.link&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-blue-600",children:[(0,t.jsx)(G.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"text-xs",children:"Link"})]})]}),(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>d(e),className:"text-xs px-3 py-1",children:[(0,t.jsx)(T.A,{className:"h-3 w-3 mr-1"}),"View"]})]})]})]})},e.id)})})}var $=a(81497),O=a(69074),H=a(71366),Z=a(15448),Q=a(6874),J=a.n(Q);function Y(e){let{confession:s,isOpen:a,onClose:r,onStatusChange:i}=e;if(!s)return null;let d=B(s.timeConfession);return(0,t.jsx)(f.lG,{open:a,onOpenChange:r,children:(0,t.jsx)(f.Cf,{className:"max-w-6xl max-h-[90vh] overflow-hidden bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-100 border-0 shadow-2xl p-0",children:(0,t.jsxs)("div",{className:"overflow-y-auto max-h-[90vh]",children:[(0,t.jsx)(f.c7,{className:"p-6 pb-4 border-b border-white/30 bg-white/20 backdrop-blur-sm",children:(0,t.jsxs)(f.L3,{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold shadow-lg",children:(0,t.jsx)(q.A,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:s.userName}),(0,t.jsx)("p",{className:"text-sm text-gray-600 bg-white/50 px-3 py-1 rounded-full inline-block mt-1",children:s.category})]}),(0,t.jsx)("div",{className:"ml-auto",children:(0,t.jsx)(l.E,{className:"".concat(U(s.status)," font-medium shadow-sm text-sm px-3 py-2"),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-6",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[s.image?(0,t.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/30 shadow-sm",children:[(0,t.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2 mb-4",children:[(0,t.jsx)($.A,{className:"h-5 w-5 text-blue-600"}),"Confession Image"]}),(0,t.jsx)("div",{className:"bg-white/80 p-4 rounded-lg border border-white/40",children:(0,t.jsxs)("div",{className:"relative group cursor-pointer",children:[(0,t.jsx)(F.default,{src:s.image||"/placeholder.svg",width:"600",height:"400",className:"w-full h-auto max-h-96 object-cover rounded-lg shadow-md group-hover:shadow-lg transition-all duration-300",alt:"Confession image"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors rounded-lg"})]})})]}):(0,t.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/30 shadow-sm",children:[(0,t.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2 mb-4",children:[(0,t.jsx)($.A,{className:"h-5 w-5 text-gray-400"}),"No Image Attached"]}),(0,t.jsxs)("div",{className:"bg-gray-100/80 p-8 rounded-lg border border-gray-200/50 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto bg-gray-300 rounded-lg flex items-center justify-center mb-3",children:(0,t.jsx)($.A,{className:"h-8 w-8 text-gray-500"})}),(0,t.jsx)("p",{className:"text-gray-600",children:"This confession does not include an image"})]})]}),(0,t.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/30 shadow-sm",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Submission Details"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,t.jsx)(O.A,{className:"h-4 w-4 text-blue-600"}),(0,t.jsxs)("span",{className:"text-gray-700",children:[d.date," at ",d.time]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:D(s.feeling)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-800",children:s.feeling}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Emotional state"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/30 shadow-sm",children:[(0,t.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2 mb-4",children:[(0,t.jsx)($.A,{className:"h-5 w-5 text-purple-600"}),"Confession Details"]}),(0,t.jsx)("div",{className:"bg-white/80 p-6 rounded-lg border border-white/40",children:(0,t.jsx)("p",{className:"text-gray-800 leading-relaxed text-base",children:s.description})})]}),s.adminComment&&(0,t.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/30 shadow-sm",children:[(0,t.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2 mb-4",children:[(0,t.jsx)(H.A,{className:"h-5 w-5 ".concat("rejected"===s.status?"text-red-600":"text-green-600")}),"Admin Response","rejected"===s.status&&(0,t.jsx)(l.E,{variant:"destructive",className:"ml-2",children:"Rejection Reason"})]}),(0,t.jsx)("div",{className:"".concat("rejected"===s.status?"bg-red-50/80 p-6 rounded-lg border border-red-200/50":"bg-green-50/80 p-6 rounded-lg border border-green-200/50"),children:(0,t.jsx)("p",{className:"leading-relaxed text-base font-medium ".concat("rejected"===s.status?"text-red-800":"text-green-800"),children:s.adminComment})})]}),(0,t.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/30 shadow-sm",children:[(0,t.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2 mb-4",children:[(0,t.jsx)(Z.A,{className:"h-5 w-5 text-blue-600"}),"Tags & Categories"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"bg-blue-50/80 p-4 rounded-lg border border-blue-200/50",children:[(0,t.jsx)("p",{className:"text-sm text-blue-600 font-medium mb-1",children:"Student Tags"}),(0,t.jsx)("p",{className:"text-blue-700 font-medium",children:s.hashtag})]}),s.adminHashtag&&(0,t.jsxs)("div",{className:"bg-purple-50/80 p-4 rounded-lg border border-purple-200/50",children:[(0,t.jsx)("p",{className:"text-sm text-purple-600 font-medium mb-1",children:"Admin Tags"}),(0,t.jsx)("p",{className:"text-purple-700 font-medium",children:s.adminHashtag})]})]})]}),s.link&&(0,t.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/30 shadow-sm",children:[(0,t.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2 mb-4",children:[(0,t.jsx)(G.A,{className:"h-5 w-5 text-green-600"}),"Resource Link"]}),(0,t.jsxs)(J(),{href:s.link,className:"inline-flex items-center gap-2 text-green-700 hover:text-green-800 bg-green-50/80 hover:bg-green-100/80 px-4 py-3 rounded-lg transition-colors border border-green-200/50 font-medium w-full justify-center",target:"_blank",children:[(0,t.jsx)(G.A,{className:"h-4 w-4"}),"Open Resource"]})]}),(0,t.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/30 shadow-sm",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Admin Actions"}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:["approved"!==s.status&&(0,t.jsxs)(n.$,{className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white shadow-lg hover:shadow-xl transition-all",onClick:()=>i(s.id,"approved"),children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Approve"]}),"rejected"!==s.status&&(0,t.jsxs)(n.$,{className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white shadow-lg hover:shadow-xl transition-all",onClick:()=>i(s.id,"rejected"),children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Reject with Reason"]})]})]})]})]})]})})})}var W=a(40646),X=a(17580);function K(e){let{stats:s}=e,[a,l]=(0,r.useState)({total:0,pending:0,approved:0,rejected:0,totalUsers:0});(0,r.useEffect)(()=>{let e=0,a=setInterval(()=>{let t=1-Math.pow(1-Math.min(++e/60,1),4);l({total:Math.round(s.total*t),pending:Math.round(s.pending*t),approved:Math.round(s.approved*t),rejected:Math.round(s.rejected*t),totalUsers:Math.round(s.totalUsers*t)}),e>=60&&(clearInterval(a),l({total:s.total,pending:s.pending,approved:s.approved,rejected:s.rejected,totalUsers:s.totalUsers}))},2e3/60);return()=>clearInterval(a)},[s]);let n=[{title:"Total Confessions",value:a.total,icon:$.A,iconColor:"text-blue-600",bgColor:"bg-blue-50",delay:"0ms"},{title:"Pending Review",value:a.pending,icon:z.A,iconColor:"text-orange-600",bgColor:"bg-orange-50",delay:"200ms"},{title:"Approved",value:a.approved,icon:W.A,iconColor:"text-green-600",bgColor:"bg-green-50",delay:"400ms"},{title:"Total Users",value:a.totalUsers,icon:X.A,iconColor:"text-purple-600",bgColor:"bg-purple-50",delay:"600ms"}];return(0,t.jsx)("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:n.map(e=>{let s=e.icon;return(0,t.jsxs)(V.Zp,{className:"relative overflow-hidden bg-white border border-gray-200 shadow-sm hover:shadow-lg transition-all duration-500 animate-slide-up group",style:{animationDelay:e.delay},children:[(0,t.jsx)(V.Wu,{className:"p-4 sm:p-6",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-3 sm:space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg ".concat(e.bgColor," flex items-center justify-center group-hover:scale-110 transition-transform duration-300"),children:(0,t.jsx)(s,{className:"h-5 w-5 sm:h-6 sm:w-6 ".concat(e.iconColor)})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-gray-600 mb-1",children:e.title}),(0,t.jsx)("div",{className:"flex items-baseline space-x-2",children:(0,t.jsx)("span",{className:"text-2xl sm:text-3xl font-bold text-gray-900 tabular-nums",children:e.value})})]})]})}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -skew-x-12 transform translate-x-[-100%] group-hover:translate-x-[200%] transition-transform duration-1000 ease-out"})]},e.title)})})}let ee=e=>{var s,a,t,r;return{id:(null==e?void 0:e.id)||0,userName:(null==e?void 0:e.is_anonymous)?"Anonymous":(null==e?void 0:e.author)!=="Anonymous User"?null==e?void 0:e.author:"Anonymous",title:(null==e?void 0:e.title)||"No title available",description:(null==e?void 0:e.content)||(null==e?void 0:e.title)||"No content available",image:(null==e||null==(s=e.image)?void 0:s.has_image)&&(null==e||null==(a=e.image)?void 0:a.url)?e.image.url:void 0,hashtag:(null==e||null==(t=e.tags)?void 0:t.length)?e.tags.join(", "):"general",adminHashtag:(null==e?void 0:e.admin_note)||"",adminComment:(null==e?void 0:e.admin_note)||"",link:"",feeling:"neutral",timeConfession:(null==e?void 0:e.created_at)||new Date().toISOString(),status:(null==e?void 0:e.status)||"pending",category:(null==e||null==(r=e.tags)?void 0:r[0])||"general",tags:(null==e?void 0:e.tags)||[],likeCount:(null==e?void 0:e.like_count)||0,commentCount:(null==e?void 0:e.comment_count)||0}};function es(){let e=(0,p.jL)(),{pendingPosts:s,approvedPosts:a,rejectedPosts:f,allPosts:b,dashboardOverview:v,pagination:j,filters:N,loading:y,error:w}=(0,p.GV)(e=>e.admin),[C,_]=(0,r.useState)([]),[P,R]=(0,r.useState)(null),[S,L]=(0,r.useState)(!1),[T,F]=(0,r.useState)(N.posts.search||""),[U,D]=(0,r.useState)("all"),[B]=(0,r.useState)(N.posts.status||"all"),[E,V]=(0,r.useState)(N.posts.page),[q,z]=(0,r.useState)("table"),[G,$]=(0,r.useState)(!1),O=N.posts.per_page,[H,Z]=(0,r.useState)(!1),[Q,J]=(0,r.useState)(null),[W,X]=(0,r.useState)(!1),[es,ea]=(0,r.useState)(!1),[et,er]=(0,r.useState)(null),[el,en]=(0,r.useState)(!1);(0,r.useEffect)(()=>{switch(e((0,h.KZ)()),U){case"pending":e((0,h.Vy)({page:E,per_page:O,search:T||void 0}));break;case"approved":e((0,h.jI)({page:E,per_page:O,search:T||void 0}));break;case"rejected":e((0,h.Ge)({page:E,per_page:O,search:T||void 0}));break;default:e((0,h.bB)({page:E,per_page:O,search:T||void 0}))}},[]),(0,r.useEffect)(()=>{e((0,h.Mf)({search:T||void 0,status:"all"!==B?B:void 0,page:E,per_page:O}))},[e,T,B,E,O]);let ei=(0,r.useCallback)(()=>{$(!0),setTimeout(()=>{switch(U){case"pending":e((0,h.Vy)({page:E,per_page:O,search:T||void 0}));break;case"approved":e((0,h.jI)({page:E,per_page:O,search:T||void 0}));break;case"rejected":e((0,h.Ge)({page:E,per_page:O,search:T||void 0}));break;default:e((0,h.bB)({page:E,per_page:O,search:T||void 0}))}setTimeout(()=>{$(!1)},500)},300)},[e,U,E,O,T]),ed=(0,r.useMemo)(()=>v?{total:v.total_confessions,pending:v.posts_by_status.pending,approved:v.posts_by_status.approved,rejected:v.posts_by_status.rejected,totalUsers:v.total_users,today:0,yesterday:0,lastWeekend:0}:{total:0,pending:0,approved:0,rejected:0,totalUsers:0,today:0,yesterday:0,lastWeekend:0},[v]),eo=(()=>{switch(U){case"pending":return s;case"approved":return a;case"rejected":return f;default:return b}})(),ec=(0,r.useMemo)(()=>{let e=eo;return"all"!==B&&"all"===U&&(e=e.filter(e=>e.status===B)),T&&(e=e.filter(e=>e.content.toLowerCase().includes(T.toLowerCase())||e.title.toLowerCase().includes(T.toLowerCase())||e.author.toLowerCase().includes(T.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(T.toLowerCase())))),e},[eo,B,T,U]).map(ee),em=(()=>{switch(U){case"pending":return j.pendingPosts;case"approved":return j.approvedPosts;case"rejected":return j.rejectedPosts;default:return j.allPosts}})(),eu=(null==em?void 0:em.last_page)||Math.ceil(ec.length/O),ex=(0,r.useCallback)(async(e,s)=>{"approved"===s?(er(e),en(!1),ea(!0)):(J(e),X(!1),Z(!0))},[]),eg=(0,r.useCallback)(async()=>{if(et||el)try{el?(await Promise.all(C.map(s=>e((0,h.G_)({postId:s})).unwrap())),_([])):await e((0,h.G_)({postId:et})).unwrap(),e((0,h.KZ)()),"all"!==U&&1===ec.length&&E>1?V(1):ei(),ea(!1),er(null),en(!1)}catch(e){console.error("Failed to approve post:",e)}},[e,et,el,C,ei,U,ec.length,E]),ep=(0,r.useCallback)(async s=>{if(Q||W)try{W?(await Promise.all(C.map(a=>e((0,h.uo)({postId:a,admin_note:s})).unwrap())),_([])):await e((0,h.uo)({postId:Q,admin_note:s})).unwrap(),e((0,h.KZ)()),"all"!==U&&1===ec.length&&E>1?V(1):ei(),Z(!1),J(null),X(!1)}catch(e){console.error("Failed to reject post:",e)}},[e,Q,W,C,ei,U,ec.length,E]),eh=(0,r.useCallback)(()=>{0!==C.length&&(en(!0),er(null),ea(!0))},[C]),ef=(0,r.useCallback)(()=>{0!==C.length&&(X(!0),J(null),Z(!0))},[C]),eb=(0,r.useCallback)(e=>{e?_(ec.map(e=>e.id)):_([])},[ec]),ev=(0,r.useCallback)(e=>{R(e),L(!0)},[]),ej=(0,r.useCallback)(s=>{D(s),V(1),_([]),$(!0),setTimeout(()=>{switch(s){case"pending":e((0,h.Vy)({page:1,per_page:O,search:T||void 0}));break;case"approved":e((0,h.jI)({page:1,per_page:O,search:T||void 0}));break;case"rejected":e((0,h.Ge)({page:1,per_page:O,search:T||void 0}));break;default:e((0,h.bB)({page:1,per_page:O,search:T||void 0}))}setTimeout(()=>{$(!1)},500)},300)},[e,O,T]),eN=(0,r.useCallback)(s=>{V(s),$(!0),setTimeout(()=>{switch(U){case"pending":e((0,h.Vy)({page:s,per_page:O,search:T||void 0}));break;case"approved":e((0,h.jI)({page:s,per_page:O,search:T||void 0}));break;case"rejected":e((0,h.Ge)({page:s,per_page:O,search:T||void 0}));break;default:e((0,h.bB)({page:s,per_page:O,search:T||void 0}))}setTimeout(()=>{$(!1)},500),window.scrollTo({top:0,behavior:"smooth"})},300)},[e,U,O,T]),ey=[{id:"all",label:"All Posts",count:ed.total},{id:"pending",label:"Pending",count:ed.pending},{id:"approved",label:"Approved",count:ed.approved},{id:"rejected",label:"Rejected",count:ed.rejected}],ew=(0,r.useCallback)(s=>{F(s),s.length>0&&$(!0);let a=setTimeout(()=>{switch(U){case"pending":e((0,h.Vy)({page:1,per_page:O,search:s||void 0}));break;case"approved":e((0,h.jI)({page:1,per_page:O,search:s||void 0}));break;case"rejected":e((0,h.Ge)({page:1,per_page:O,search:s||void 0}));break;default:e((0,h.bB)({page:1,per_page:O,search:s||void 0}))}V(1),setTimeout(()=>{$(!1)},300)},500);return()=>clearTimeout(a)},[e,U,O]);return y.fetchDashboardOverview&&!v?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):(0,t.jsxs)("div",{className:"min-h-screen animate-page-load",children:[(0,t.jsx)("div",{className:"animate-header-slide",children:(0,t.jsx)("div",{className:"mx-auto",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col text-left px-4 py-6 space-y-2",children:[(0,t.jsx)("h1",{className:"text-3xl sm:text-2xl lg:text-4xl font-bold text-black",children:"Posts Management"}),(0,t.jsx)("p",{className:"font-light sm:text-lg text-black",children:"Manage and review student posts"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[(0,t.jsxs)(n.$,{variant:"table"===q?"default":"outline",size:"sm",onClick:()=>z("table"),className:"flex-1 sm:flex-none",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Table"]}),(0,t.jsxs)(n.$,{variant:"cards"===q?"default":"outline",size:"sm",onClick:()=>z("cards"),className:"flex-1 sm:flex-none",children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Cards"]})]})]})})}),(0,t.jsxs)("div",{className:"max-w-auto",children:[(0,t.jsx)("div",{className:"mb-6 sm:mb-8 animate-stats-cascade stagger-1",children:(0,t.jsx)(K,{stats:ed})}),(0,t.jsx)("div",{className:"border-b border-gray-200 mb-4 sm:mb-6 animate-fade-in stagger-2",children:(0,t.jsx)("nav",{className:"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto",children:ey.map(e=>(0,t.jsxs)("button",{onClick:()=>ej(e.id),className:"whitespace-nowrap py-2 sm:py-3 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center gap-2 transition-all duration-200 ".concat(U===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.label,(0,t.jsx)(l.E,{variant:"secondary",className:"text-xs transition-all duration-200 ".concat(U===e.id?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:e.count})]},e.id))})}),(0,t.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 mb-4 sm:mb-6 animate-fade-in stagger-3",children:(0,t.jsx)("div",{className:"flex flex-col lg:flex-row gap-4 justify-between items-start lg:items-center",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(i.p,{placeholder:"Search posts...",value:T,onChange:e=>ew(e.target.value),className:"pl-10 w-full sm:w-80 text-gray-600 bg-white"})]}),C.length>0&&(0,t.jsxs)("div",{className:"flex gap-2 animate-slide-up",children:[(0,t.jsxs)(n.$,{size:"sm",onClick:eh,disabled:y.approvePost,className:"bg-green-600 hover:bg-green-700 text-white flex-1 sm:flex-none",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-1"}),"Approve (",C.length,")"]}),(0,t.jsxs)(n.$,{size:"sm",variant:"destructive",onClick:ef,disabled:y.rejectPost,className:"flex-1 sm:flex-none",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-1"}),"Reject with Reason (",C.length,")"]})]})]})})}),w&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,t.jsx)("p",{className:"text-red-800",children:w})}),(y.fetchPendingPosts||y.fetchApprovedPosts||y.fetchRejectedPosts||y.fetchAllPosts)&&(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}),(0,t.jsxs)("div",{className:"animate-content-reveal stagger-4 relative",children:[G&&(0,t.jsx)("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-sm z-10 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,t.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Updating list..."})]})}),"table"===q?(0,t.jsx)(I,{confessions:ec,selectedConfessions:C,onSelectionChange:_,onSelectAll:eb,onStatusChange:ex,onView:ev}):(0,t.jsx)(M,{confessions:ec,selectedConfessions:C,onSelectionChange:_,onStatusChange:ex,onView:ev})]}),eu>1&&(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-6 sm:mt-8 px-4 py-3 bg-white border border-gray-200 rounded-2xl shadow-sm animate-fade-in stagger-5",children:[(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>eN(Math.max(1,E-1)),disabled:1===E,className:"w-full sm:w-auto",children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Previous"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 overflow-x-auto",children:[Array.from({length:Math.min(5,eu)},(e,s)=>{let a=s+1,r=E===a;return(0,t.jsx)(n.$,{variant:r?"default":"outline",size:"sm",onClick:()=>eN(a),className:"w-8 h-8 p-0 flex-shrink-0 ".concat(r?"bg-black text-white hover:bg-black":""),children:a},a)}),eu>5&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-gray-500 flex-shrink-0",children:"..."}),(0,t.jsx)(n.$,{variant:E===eu?"default":"outline",size:"sm",onClick:()=>eN(eu),className:"w-8 h-8 p-0 flex-shrink-0 ".concat(E===eu?"bg-black text-white hover:bg-black":""),children:eu})]})]}),(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>eN(Math.min(eu,E+1)),disabled:E===eu,className:"w-full sm:w-auto",children:["Next",(0,t.jsx)(g.A,{className:"h-4 w-4 ml-2"})]})]})]}),(0,t.jsx)("div",{className:"animate-modal-entrance",children:(0,t.jsx)(Y,{confession:P,isOpen:S,onClose:()=>L(!1),onStatusChange:ex})}),(0,t.jsx)(k,{isOpen:H,onClose:()=>{Z(!1),J(null),X(!1)},onSubmit:ep,isBulk:W,isLoading:y.rejectPost}),(0,t.jsx)(A,{isOpen:es,onClose:()=>{ea(!1),er(null),en(!1)},onSubmit:eg,isBulk:el,isLoading:y.approvePost})]})}},53680:(e,s,a)=>{"use strict";a.d(s,{kp:()=>r.kp,rq:()=>n.rq,Qx:()=>r.Qx,jL:()=>c,GV:()=>m,h7:()=>u,_9:()=>i,bP:()=>l,E$:()=>o,a4:()=>d,j6:()=>x});var t=a(34540);a(41480);var r=a(12840);a(5513);let l=()=>{var e,s,a,t;let r=m(e=>e.faqs)||{faqs:[],adminFaqs:[],pagination:null,filters:{page:1,per_page:15},loading:{fetchFaqs:!1,createFaq:!1,updateFaq:!1,deleteFaq:!1},error:null};return{faqs:r.faqs||[],adminFaqs:r.adminFaqs||[],pagination:r.pagination,filters:r.filters,loading:r.loading,isLoading:(null==(e=r.loading)?void 0:e.fetchFaqs)||!1,isCreating:(null==(s=r.loading)?void 0:s.createFaq)||!1,isUpdating:(null==(a=r.loading)?void 0:a.updateFaq)||!1,isDeleting:(null==(t=r.loading)?void 0:t.deleteFaq)||!1,error:r.error,hasFaqs:(r.faqs||[]).length>0,hasAdminFaqs:(r.adminFaqs||[]).length>0,isAnyLoading:!!r.loading&&Object.values(r.loading).some(e=>e),getFaqById:e=>(r.faqs||[]).find(s=>s.id===e),getAdminFaqById:e=>(r.adminFaqs||[]).find(s=>s.id===e)}};var n=a(28052);let i=()=>{let e=m(e=>e.comments);return{commentsByPost:(null==e?void 0:e.commentsByPost)||{},paginationByPost:(null==e?void 0:e.paginationByPost)||{},userComments:(null==e?void 0:e.userComments)||[],userCommentsPagination:(null==e?void 0:e.userCommentsPagination)||null,isLoading:(null==e?void 0:e.isLoading)||!1,isCreating:(null==e?void 0:e.isCreating)||!1,isUpdating:(null==e?void 0:e.isUpdating)||!1,isDeleting:(null==e?void 0:e.isDeleting)||!1,error:(null==e?void 0:e.error)||null}},d=e=>{let s=m(e=>e.comments);return{comments:(null==s?void 0:s.commentsByPost[e])||[],pagination:(null==s?void 0:s.paginationByPost[e])||null,isLoading:(null==s?void 0:s.isLoading)||!1,error:(null==s?void 0:s.error)||null}},o=()=>{var e,s,a,t,r,l;let n=m(e=>e.notifications)||{notifications:[],unreadCount:0,pagination:null,filters:{page:1,per_page:15},loading:{fetchNotifications:!1,markAsRead:!1,getUnreadCount:!1},error:null};return{notifications:n.notifications||[],unreadCount:n.unreadCount||0,pagination:n.pagination,filters:n.filters,loading:n.loading,isLoading:(null==(e=n.loading)?void 0:e.fetchNotifications)||!1,isMarkingAsRead:(null==(s=n.loading)?void 0:s.markAsRead)||!1,isFetchingUnreadCount:(null==(a=n.loading)?void 0:a.getUnreadCount)||!1,error:n.error,hasNotifications:(n.notifications||[]).length>0,hasUnreadNotifications:(n.unreadCount||0)>0,isAnyLoading:!!n.loading&&Object.values(n.loading).some(e=>e),unreadNotifications:(n.notifications||[]).filter(e=>!e.is_read),readNotifications:(n.notifications||[]).filter(e=>e.is_read),getNotificationsByType:e=>(n.notifications||[]).filter(s=>s.type===e),getNotificationById:e=>(n.notifications||[]).find(s=>s.id===e),hasMorePages:!!n.pagination&&n.pagination.current_page<n.pagination.last_page,currentPage:(null==(t=n.pagination)?void 0:t.current_page)||1,totalPages:(null==(r=n.pagination)?void 0:r.last_page)||1,totalNotifications:(null==(l=n.pagination)?void 0:l.total)||0}},c=()=>(0,t.wA)(),m=t.d4,u=()=>{var e;let s=m(e=>e.auth);return{user:(null==s?void 0:s.user)||null,token:(null==s?void 0:s.token)||null,isAuthenticated:(null==s?void 0:s.isAuthenticated)||!1,isLoading:(null==s?void 0:s.isLoading)||!1,error:null!=(e=null==s?void 0:s.error)?e:null}},x=()=>{let e=m(e=>e.posts);return{publicPosts:(null==e?void 0:e.publicPosts)||[],publicPostsPagination:(null==e?void 0:e.publicPostsPagination)||null,userPosts:(null==e?void 0:e.userPosts)||[],userPostsPagination:(null==e?void 0:e.userPostsPagination)||null,userPostsByStatus:(null==e?void 0:e.userPostsByStatus)||{pending:[],approved:[],rejected:[]},userPostsByStatusPagination:(null==e?void 0:e.userPostsByStatusPagination)||{pending:null,approved:null,rejected:null},currentPost:(null==e?void 0:e.currentPost)||null,filters:(null==e?void 0:e.filters)||{},isLoading:(null==e?void 0:e.isLoading)||!1,isCreating:(null==e?void 0:e.isCreating)||!1,isUpdating:(null==e?void 0:e.isUpdating)||!1,isDeleting:(null==e?void 0:e.isDeleting)||!1,isLoadingByStatus:(null==e?void 0:e.isLoadingByStatus)||{pending:!1,approved:!1,rejected:!1},error:(null==e?void 0:e.error)||null}}},54165:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>m,Es:()=>x,L3:()=>g,c7:()=>u,lG:()=>d,rr:()=>p});var t=a(95155),r=a(12115),l=a(15452),n=a(54416),i=a(59434);let d=l.bL;l.l9;let o=l.ZL;l.bm;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});c.displayName=l.hJ.displayName;let m=r.forwardRef((e,s)=>{let{className:a,children:r,...d}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(c,{}),(0,t.jsxs)(l.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[r,(0,t.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(n.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.UC.displayName;let u=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};u.displayName="DialogHeader";let x=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};x.displayName="DialogFooter";let g=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});g.displayName=l.hE.displayName;let p=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});p.displayName=l.VY.displayName},59434:(e,s,a)=>{"use strict";a.d(s,{cn:()=>l});var t=a(52596),r=a(39688);function l(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,r.QP)((0,t.$)(s))}},62523:(e,s,a)=>{"use strict";a.d(s,{p:()=>n});var t=a(95155),r=a(12115),l=a(59434);let n=r.forwardRef((e,s)=>{let{className:a,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...n})});n.displayName="Input"},66695:(e,s,a)=>{"use strict";a.d(s,{Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>i});var t=a(95155),r=a(12115),l=a(59434);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...r})});n.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},85127:(e,s,a)=>{"use strict";a.d(s,{A0:()=>i,BF:()=>d,Hj:()=>o,XI:()=>n,nA:()=>m,nd:()=>c});var t=a(95155),r=a(12115),l=a(59434);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",a),...r})})});n.displayName="Table";let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",a),...r})});i.displayName="TableHeader";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...r})});d.displayName="TableBody",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-gray-300 data-[state=selected]:bg-muted",a),...r})});o.displayName="TableRow";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});c.displayName="TableHead";let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});m.displayName="TableCell",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},88539:(e,s,a)=>{"use strict";a.d(s,{T:()=>n});var t=a(95155),r=a(12115),l=a(59434);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...r})});n.displayName="Textarea"}},e=>{var s=s=>e(e.s=s);e.O(0,[7598,3863,6766,3024,6874,1348,8250,9267,1118,4777,8185,6048,8441,1684,7358],()=>s(46295)),_N_E=e.O()}]);